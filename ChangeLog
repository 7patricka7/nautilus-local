2005-10-27  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	Include locale.h to fix build. Patch from Nelson Ben√≠tez.

2005-10-27  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c: (action_connect_to_server_callback):
	Fix leak. Patch from Kjartan Maraas. (#319333)

2005-10-27  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-mime-actions.c (get_open_with_mime_applications):
	Correctly sort the mime lists.

2005-10-20  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-program-choosing.c:
	(nautilus_launch_show_file):
	* src/nautilus-window-manage-views.c:
	(display_view_selection_failure):
	* src/file-manager/fm-directory-view.c:
	(activate_callback),
	(activate_activation_uri_ready_callback):
	Don't bail if an authentication request was cancelled.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-mime-actions.c:
	(get_open_with_mime_applications), (application_compare_by_name),
	(application_compare_by_id):
	Sort applications by name. Fixes bug #310038.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-bookmark.c:
	(bookmark_file_changed_callback):
	Don't update bookmark when its target file is trashed. Fixes #162787.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(can_delete_uri_without_confirm),
	(confirm_delete_directly):
	Don't request confirmation for deletion of "burn:" URIs. Fixes
	#302607.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-places-sidebar.c: (update_places):
	* src/nautilus-window-bookmarks.c: (update_bookmarks):
	Skip nonexistant bookmarks in menus/sidebar. Fixes #312507.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.12.1 ===

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.12.1

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new),
	(nautilus_file_operations_progress_new_file):
	Correctly escape input strings for GMarkup. (#317736)
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c:
	(fm_list_model_sort_file_entries):
	Correctly pass iter to gtk_tree_model_rows_reordered() (#315704)
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-metafile.c:
	(nautilus_directory_get_file_metadata):
	On assert failure, return default metadata, not NULL.
	Partial fix of #308977.
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window.c:
	Verify arguments in public functions.
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-private.h:
	Don't crash if file removed during start of drag. (#158196)
	Patch from Christian Neumair.

	Remove remove_context_menu_timeout, which is not needed anymore.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/nautilus-directory-view-ui.xml:
	Fix some spelling errors.
	Patch from Lukasz Stelmach <stlman@poczta.fm>

2005-09-30  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_update_scroll_region),
	(lay_down_icons_horizontal):
	Only wrap icons when the right margin touches the rightmost icon.
	Fixes #313025.

2005-09-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c: (compare_rows):
	Correct sort order for dummy row.
	Possible fix for #123051

2005-09-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(activate_check_mime_types):
	Never warn if the files would be launched in the same app.
	Partially reverts checkin from 2005-08-01.

2005-09-26  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-desktop-directory.c:
	(desktop_directory_changed_callback), (desktop_finalize),
	(update_desktop_directory): Make changes to "desktop_is_home_dir"
	GConf key instant apply. Fixes #116217.

	* libnautilus-private/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_get_image): Add emblems to drag icon.
	Partially fixes	#159643.

	* src/file-manager/fm-directory-view.c:
	(action_mount_volume_callback), (action_unmount_volume_callback),
	(action_eject_volume_callback), (file_should_show_foreach),
	(real_update_menus_volumes): Allow to mount/unmount/eject multiple
	volumes at once. Fixes #156169.

2005-09-20  christian neumair  <chris@gnome-de.org>

	* src/nautilus-connect-server-dialog.c: (connect_to_server):
	Fix leak and crasher. Fixes #314730.

	* src/file-manager/fm-directory-view.c: (connect_proxy):
	Don't poke around with null pixbuf if icon theme lookup failed.

	* libnautilus-private/nautilus-desktop-directory-file.c:
	(desktop_directory_file_get_deep_counts):
	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_deep_counts),
	(nautilus_file_get_string_attribute_with_default:):
	* libnautilus-private/nautilus-file.h:
	* libnautilus-private/nautilus-trash-file.c:
	(trash_file_get_deep_counts):
	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field),
	(update_visibility_of_item_count_fields),
	(update_visibility_of_item_count_fields_wrapper),
	(remember_directory_contents_widget),
	(append_directory_contents_fields), (real_destroy):
	Add force flag to nautilus_file_get_deep_counts, which forces
	generation even if the "show deep count" preference is turned off.
	pass TRUE in property window and FALSE everywhere else. Fixes #126068.

2005-09-19  Nate Nielsen <nielsen@memberwebs.com>

	* nautilus-connect-server-dialog-main.c: (main):
	* nautilus-connect-server-dialog.h:
	* nautilus-connect-server-dialog.c:
	(nautilus_connect_server_dialog_new):
	* nautilus-window-menus.c:
	(action_connect_to_server_callback): 
	Autofill "Connect to server" dialog where possible.
	Fixes #314745

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move),:
	Try to use the trash associated with a symlink's parent directory if
	resolution fails because of broken symlink when moving symlink to
	trash.

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_self_check_file_operations):
	Fix date self checks. Fixes #47364.

2005-09-19  Alexander Larsson  <alexl@redhat.com>

	* icons/Makefile.am:
	* icons/Search.png:
	* icons/nautilus-desktop.png:
	* icons/nautilus-file-management-properties.png:
	* icons/nautilus-mini-logo.png:
	* icons/nautilus-server-connect.png:
	* icons/side_bar_image.png:
	Remove unused icons (#315990)
	Patch from Jaap A. Haitsma
	
2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-metafile.c: (copy_file_metadata):
	* libnautilus-private/nautilus-thumbnails.c:
	(nautilus_update_thumbnail_file_copied),
	(nautilus_update_thumbnail_file_renamed),
	(nautilus_remove_thumbnail_for_file):
	* libnautilus-private/nautilus-thumbnails.h:
	Copy thumbnails when copying file metadata. Fixes #45191.

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (drag_begin_callback),
	(motion_notify_callback):
	Setup drag in the "drag-begin" handler.

2005-09-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.[ch]:
	* libnautilus-private/nautilus-icon-private.h:
	Add support for lazily positioned icons.
	
	* libnautilus-private/nautilus-icon-dnd.c: (handle_local_move):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_add_file),
	(fm_icon_view_screen_changed):
	Use lazily positioned icons for desktop icons. (#45953)

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-09-10  Erdal Ronahi  <erdal.ronahi@gmail.com>

        * confiure.in: Added "ku" (Kurdish) to ALL_LINGUAS

2005-09-08  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #171073:

	* libnautilus-private/nautilus-trash-directory.c
	(nautilus_trash_directory_instance_init): In addition to
	connecting to "volume_pre_unmount" on the volume monitor, also
	connect to "volume_unmounted".  This will let the trash clean up
	its merged directory even if the unmount is not initiated from
	Nautilus.
	
	* libnautilus-private/nautilus-merged-directory.c
	(merged_remove_real_directory): When a real directory is removed
	from the merged directory, emit notifications to that effect.
	This lets the trash window remove the icons that used to
	correspond to a volume that got unmounted.
	(real_directory_notify_files_removed): New utility function.

2005-09-06  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (fm_list_view_init): Ensure that
	the zoom level is initialized correctly in fm_list_view_begin_loading.
	Fixes #314269.

2005-09-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-async.c:
	(nautilus_directory_monitor_add_internal),
	(nautilus_directory_monitor_remove_internal):
	* libnautilus-private/nautilus-file-private.h:
	* libnautilus-private/nautilus-file.c: (finalize):
	Only use directory monitors to avoid using lots and lots of
	file monitors. This is an optimization in almost all cases, although
	it does a bit more work when viewing a file properties dialog with the
	containing folder window hidden. (#315041)

2005-09-06  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (add_extension_menu_items),
	(get_unique_files), (reset_extension_actions_menu): Always pass all
	selected files to extension, instead of passing max. 1 per selected
	MIME type. Fixes #314721.

2005-09-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.12.0 ===

2005-09-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.12.

	* NEWS:
	Update for release

2005-08-31  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(handle_focus_in_event), (handle_focus_out_event):
	Don't redraw the whole desktop on focus in/out.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_icon_from_cache):
	Revert memleak patch from 2005-08-23, since it was
	wrong and causes crashes.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	(nautilus_icon_container_get_drop_action):
	Handle background color/image drops even on
	icons. (#47536)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(filtering_changed_callback):
	Fix handling of global show-hidden-file prefs change.
	(#306821)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_get_first_visible_icon):
	Handle non-sorted-by-y icon containers (manual mode).
	#157415. Patch from Christian Neumair <chris@gnome-de.org>

2005-08-25  William Jon McCann  <mccann@jhu.edu>

	* src/file-manager/fm-icon-view.c (should_preview_sound):
	Don't allow audio preview in burn://.  Workaround for
	#312275.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_special_icon_for_file),
	(nautilus_icon_factory_get_icon_for_file),
	(nautilus_icon_factory_is_icon_ready_for_file):
	Handle some more special location icons, and don't require
	attributes for special location icons. (#312095, #312134)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-26  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Better handling of script env vars:
	Expand uri for desktop directory.
	Expand uris for links on desktop
	Expand pathnames for items in trash.
	Fixes bug #148545
	Based on a patch from Christian Neumair  <chris@gnome-de.org>
	
2005-08-26  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(lay_down_icons_horizontal):
	Fix layouting in text-beside-icons mode for short names.
	(#159621)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-25  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.[ch]:
	* src/file-manager/fm-directory-view.c:
	Remove usage of GNOME_VFS_XFER_REMOVESOURCE in
	nautilus_file_operations_new_file_from_template, instead
	manually removing source when needed. This fixes #309592.

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.92 ===

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.92.

	* NEWS: 
	Update for release

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	(get_drop_action), (receive_dropped_keyword),
	(drag_data_received_callback):
	Enable emblem dropping to the list view and allow text
	drags on the list background. Fixes #313408.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(get_icon_from_cache):
	Don't ref cached_icon twice. Fixes #307288.

	Patch from Kjartan Maraas  <kmaraas@gnome.org>

2005-08-22  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_is_desktop_directory), (nautilus_file_can_rename),
	(prepend_automatic_emblem_names):
	* libnautilus-private/nautilus-file.h:
	* src/file-manager/fm-directory-view.c:
	(desktop_or_home_dir_in_selection), (real_update_location_menu),
	(real_update_menus):
	Don't allow trashing or deleting the home or desktop folder within
	a selection or via the location button context menu. Fixes #310414.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-22  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-mime-actions.c:
	(filter_nautilus_handler), (get_open_with_mime_applications),
	(nautilus_mime_get_open_with_applications_for_file),
	(nautilus_mime_get_applications_for_file),
	(nautilus_mime_has_any_applications_for_file):
	Don't show nautilus folder handler as application option
	for folders. Fixes #310382.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-main.c: (main):
	Revert the GDK threading patch as it causes major
	freezage. Fixes #313588.

2005-08-12  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-properties-window.c: (create_image_widget),
	(create_basic_page): Don't make icon drop target for images if
	should_show_custom_icon_buttons is FALSE. Fixes #312967.

2005-08-12  Raffaele Sandrini  <rasa@gmx.ch>

	* src/nautilus-main.c:
	Initialize the GDK threading system. Fixes #312894.

2005-08-12  Kjartan Maraas  <kmaraas@gnome.org>

	Lots of cleanups. Closes bug #313094 and bug #149714

	* libnautilus-private/nautilus-directory-background.c:
	(nautilus_file_background_write_desktop_default_settings):
	ANSIfication
	* libnautilus-private/nautilus-file.c: Mark some variables
	static.
	* libnautilus-private/nautilus-icon-container.c: 
	(nautilus_icon_container_get_selection): Return NULL not
	FALSE.
	* libnautilus-private/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_thumbnail_factory): ANSIfication
	* libnautilus-private/nautilus-metafile.c: Static variables
	* libnautilus-private/nautilus-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp): Sparse fix
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_get_background_widget): FALSE vs NULL
	* src/file-manager/fm-list-view.c: (filename_cell_data_func):
	Plug a leak. Bug #313094.
	* src/file-manager/fm-tree-model.c: (fm_tree_model_iter_get_file):
	NULL vs 0.
	* src/nautilus-bookmark-list.c:
	(nautilus_bookmark_list_get_file_path),
	(nautilus_bookmark_list_load_file): ANSIfication
	* src/nautilus-bookmarks-window.c: (bookmarks_delete_bookmark):
	ANSIfication
	* src/nautilus-main.c: (slowly_and_stupidly_obtain_timestamp):
	NULL vs 0.
	* src/nautilus-self-check-functions.c: (nautilus_run_self_checks):
	ANSIfication

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.91 ===

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.91.

	* NEWS: 
	Update for release

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c: (file_is_desktop),
	(nautilus_file_can_rename):
        Don't allow renaming of the desktop folder. Closes #125637.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-property-browser.c:
	(nautilus_property_browser_class_init),
	(nautilus_property_browser_drag_begin), (element_clicked_callback):
	Fix emblem drag icon in "Emblems & Background" dialog. (#311381)

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-08  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations.c
	(nautilus_file_operations_copy_move):
	Allow moving files within the burn location. Fixes #312085.

	Patch from William Jon McCann <mccann@jhu.edu>

2005-08-05  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-bookmarks-window.c: (create_bookmarks_window),
	(open_selected_bookmark): Open the appropriate kind of window when 
	jumping to bookmark. Fixes #312160.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-08-05  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-property-browser.c: Adapt to eel wrap table changes.
	Fixes #308996.

2005-08-05  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-window.c: (nautilus_window_class_init):
	* src/nautilus-window.h:
	Add "reload" and "prompt-for-location" signals. Bind F5 to "reload"
	and Alt-d to "prompt-for-location". Fixes #305252, #312353.

2005-08-04  Sunil Mohan Adapa  <sunil@atc.tcs.co.in>

	* configure.in: Added "te" to ALL_LINGUAS.

2005-08-03  Joe Shaw  <joeshaw@novell.com>

	* libnautilus-private/nautilus-metafile.c
	(set_file_node_timestamp): Added, sets a timestamp property on a
	file node so that metadata changes can be tracked per file, rather
	than per directory.
	(set_metadata_string_in_metafile, set_metadata_list_in_metafile,
	copy_file_metadata): Set the timestamp on the node.

2005-08-03  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (handle_typeahead): Be smarter
	about GtkTreeView-bound expand/collapse characters. Thanks to Wouter
	Bolsterlee <uws+gnome@xs4all.nl>. Fixes #312046.

	* src/nautilus-location-bar.c: (real_cancel),
	(nautilus_location_bar_class_init),
	(nautilus_location_bar_set_location)
	* src/nautilus-navigation-bar.c: (nautilus_navigation_bar_class_init):
	* src/nautilus-navigation-bar.h:
	* src/nautilus-navigation-window.c: (navigation_bar_cancel_callback),
	(navigation_bar_location_changed_callback): Hide temporary bars when
	pressing the escape key. Fixes #311652.

2005-08-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-sidebar-title.c: (nautilus_sidebar_title_init):
	Initialize best_icon_size when constructing sidebar.
	Fixes a critical librsvg warning.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-08-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-customization-data.c:
	(format_name_for_display):
	* src/nautilus-property-browser.c: (add_reset_property):
	Use "Reset" as reset emblem label. Fixes #311380.

2005-08-01  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (activate_check_mime_types):
	Use actual/guessed MIME type relation instead of relying on their
	default application information. Partially fixes #309862.

2005-07-28  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new):
	Set type hint to GDK_WINDOW_TYPE_HINT_NORMAL so that progress dialog
	appears in tasklist and is minimizable. Fixes #310676.

2005-07-28  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-dnd.c:
	(nautilus_drag_default_drop_action_for_icons):
	Default to move action for locations on other file systems if they
	should be moved to their parent folder. Fixes #61269.

2005-07-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-pathbar.c: (get_display_name_for_folder):
	Use the display name of the file if the uri uses a method
	unknown to gnome-vfs (trash:). Fixes #310274.

2005-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.90 ===

2005-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.90 and bump version.

	* NEWS: 
	Update for release

2005-07-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	Don't use trash icon for location button delete action.
	Fixes #310414.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-desktop-window.c: (real_get_icon_name),
	(nautilus_desktop_window_class_init):
	* src/nautilus-navigation-window.c: (real_get_icon_name),
	(nautilus_navigation_window_class_init):
	* src/nautilus-spatial-window.c: (real_get_icon_name),
	(nautilus_spatial_window_class_init):
	* src/nautilus-window.c: (nautilus_window_update_icon):
	* src/nautilus-window.h:
	Use file-manager icon for browser windows. Fixes bug #166516.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-19  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-icon-view.c:
	(play_file), (preview_audio): track the pid of the currently
	running sound process using a static variable and kill it
	before starting any new process.
	(can_play_sound): copy from nautilus-sound.c
	
	* src/nautilus-application.c: (finish_startup): don't call
	nautilus_sound_init()

	* libnautilus-private/nautilus-sound.[ch]: remove old code
	to track the currently runing sound process using a GConf
	key.
	
	* libnautilus-private/Makefile.am: remove nautilus-sound.[ch]
	
2005-07-19  Mark McLoughlin  <mark@skynet.ie>

	* libnautilus-private/nautilus-global-preferences.c:
	(nautilus_global_preferences_init): remove code to import
	some preferences which were deprecated in GNOME 2.2.

2005-07-15  Vincent Noel  <vnoel@cox.net>

	* src/nautilus-information-panel.c: (make_button_box),
	(add_command_buttons):
	* src/nautilus-sidebar-title.c: (sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label): Ellipsize everything in
	the information side pane, and make labels selectable. Fixes
	#310386, #80429 and #43858.

2005-07-14  Elijah Newren  <newren@gmail.com>

	* configure.in: Bump required startup-notification version up to
	0.8 (should have been done back in February with the updated
	startup-notification stuff, but better late than never)

2005-07-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Remove underlines from all lines in single click mode.
	Add hover underline and cursor. (#105521)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-13  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(volume_delete_dialog): Refer to the volume context menu as "popup
	menu", and not as "right-click menu". Fixes #308248.

2005-07-13  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-navigation-window.c: (bookmark_list_get_uri_index,
	path_bar_location_changed_callback): Try to reload visited locations
	from history before doing a full location change. Fixes #310068.

	* src/nautilus-sidebar-title.c: (nautilus_sidebar_title_init): Track
	SHOW_DIRECTORY_ITEM_COUNTS preference and update label on change.
	Fixes #92862.

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window.c:
	Pack main table with GTK_SHRINK (#16057)

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Don't scroll to end of column on rename (#309964).

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.c:
	Files with name "~" are not backups. (#170607)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	Set dnd icon in drag_begin (#307943)
	patch from Matthias Clasen

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.4 ===

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.11.4

	* NEWS: 
	Update for release
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-image-properties-page.c: (load_finished):
	list width/height separately (#159851)

	Patch from Christian Neumair <chris@gnome-de.org>
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-spatial-window.[ch]:
	* src/nautilus-window-private.h:
	* src/nautilus-window.c:
	Show busy cursor in browser mode too. (#97887)

	Patch from Christian Neumair <chris@gnome-de.org>
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	* nautilus.desktop.in:
	* src/file-manager/fm-tree-view.c:
	* src/nautilus-places-sidebar.c:
	filesystem -> file system in strings

	Sebastien Bacher <seb128@debian.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/nautilus-emblem-sidebar.c:
	Fix up some strings for the translators. (#309879)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	Handle volumes_visible changing from true to true.

	Patch from Benjamin Berg <benjamin@sipsolutions.net>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	don't activate selection on expand in single click mode (#309389)
	
	Patch from chris@gnome-de.org
	
2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-places-sidebar.c:
	Remove gtk_range_get_adjustment assertion warnings.

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-global-preferences.[ch]:
	* src/nautilus-actions.h:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-navigation-window.c:
	Add toggle to hide/show main toolbar.

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
2005-07-10  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-property-browser.c: (add_color_to_browser): Don't allow
	to add a color if another equally-named one already exists. Fixes
	#44867.

	Patch from Daniel Godas <siro.san@gmail.com>.

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-pathbar.c:
	* src/nautilus-places-sidebar.c: (update_places):
	Use the same icon for filesystem as the gtk file chooser.
	Fixes #309825.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-places-sidebar.c: (nautilus_places_sidebar_init):
	Remove extra ScrolledWindow container. Fixes #309832.

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-manage-views.c: (nautilus_window_reload):
	Preserve the selection when refreshing the view. Fixes #48383.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>

2005-07-08  Alexander Larsson  <alexl@redhat.com>

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
	* src/Makefile.am:
	* src/nautilus-pathbar.[ch]:
	New pathbar widget. Based on code from gtk.
	
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-private.h:
	Use pathbar in browser window.
	
	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	* libnautilus-private/nautilus-global-preferences.[ch]:
	Add always_use_location_entry prefs.
	
	* src/nautilus-navigation-window-menus.c:
	Whitespace fixup.

2005-07-07  Joe Shaw  <joeshaw@novell.com>

	* configure.in: Bump required gnome-vfs version up to
	2.11.1

2005-07-06  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-window.c: (add_view_as_menu_item):
	Connect accelerators with "View as" menu items. Fixes #139908.

	* libnautilus-private/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	When operating on remote locations, also display hostname in copy/move
	progress dialog.

2005-07-06  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-tree-view.c: (show_iter_for_file):
	Free the tree paths.
	* src/nautilus-notes-viewer.c: (get_property_pages): Close
	a tiny leak. (1 byte :-)
	* src/nautilus-property-browser.c: (emblem_dialog_clicked),
	(make_properties_from_directories): Unref pixbufs.
	* src/nautilus-spatial-window.c:
	(nautilus_spatial_window_set_location_button): Free icon name
	Closes bug #307291 and bug #308540.

2005-07-06  Danilo ≈†egan  <danilo@gnome.org>

	* src/file-manager/nautilus-directory-view-ui.xml: Add space
	before 'action="Rename"'.

2005-07-06  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_get_selection):
	* src/file-manager/fm-directory-view.c: (delete_selected_files):
	Correctly sort files before operating on them. Fixes #308884.

	* libnautilus-private/nautilus-dnd.c: (nautilus_drag_init):
	* libnautilus-private/nautilus-dnd.h:
	* libnautilus-private/nautilus-icon-dnd.c:
	(get_data_on_first_target_we_support), (nautilus_icon_dnd_init):
	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	(nautilus_tree_view_drag_dest_new):
	* src/nautilus-spatial-window.c:
	(nautilus_spatial_window_instance_init):
	* src/file-manager/fm-list-model.c:
	(fm_list_model_multi_drag_data_get):
	Use GTK+ helpers for text D'n'D.

	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	Register control-+/- keys on keypad for zooming. Fixes #309018.

	* libnautilus-private/nautilus-file-operations.c:
	(new_file_transfer_callback):
	Fix template duplicate numbering. Fixes #307252.

2005-07-06  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-canvas-item.c:
	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-private.h:
	Add normal_alpha style property that is used when
	frame_text is on.
	
	Patch from Benjamin Berg <benjamin@sipsolutions.net>

2005-07-05  Joe Shaw  <joeshaw@novell.com>

	* nautilus-folder-handler.desktop.in: Add x-directory/normal
	and inode/directory to the list of mime types this desktop file
	can handle.

2005-07-05  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-dnd.h:
	Change NAUTILUS_ICON_DND_TEXT_TYPE to UTF-8 string.

	* libnautilus-private/nautilus-file-operations.[ch]:
	* libnautilus-private/nautilus-icon-container.[ch]:
	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-marshal.list:
	* libnautilus-private/nautilus-tree-view-drag-dest.[ch]:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-tree-view.c:
	Enable dropping of text, which will create a new file containing the
	dropped text. Fix drop handle marshallers.

2005-07-02  Christian Kellner  <gicmo@gnome.org>

	* src/nautilus-location-entry.c:
	Replace eel_make_uri_from_input_with_trailing_ws with
	the gnome-vfs one.
	Fixes bug #165755.

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.11.3 ===

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	Fix test

	* NEWS:
	Update for release

	* configure.in: 
	Require eel 2.11.3
	
2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-window.c:
	Add nautilus_window_info_get_bookmark_list
	
	* src/Makefile.am:
	* src/nautilus-application.c:
	* src/nautilus-places-sidebar.[ch]:
	Add new places sidebar.

	Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>

	* src/file-manager/fm-tree-view.c:
	Fix runtime warnings.
	
2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	Add icon for empty file in create menu.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Better strings for browser tooltips.
	Patch from Luca Ferretti <elle.uca@libero.it>
	
2005-06-03  Dinoop Thomas <dinoop.thomas@wipro.com>
	
	* libnautilus-private/nautilus-file-operations.c:
	(parse_previous_duplicate_name): Use strchr instead of strrchr to parse the
	base name from the file name. (Fixes #306341).

2005-06-28  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-sidebar.[ch]:
	Add get_tab_tooltop method.
	
	* src/nautilus-navigation-window.c:
	* src/nautilus-side-pane.[ch]:
	Use get_tab_tooltip.
	
	* src/nautilus-emblem-sidebar.c:
	* src/nautilus-history-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-notes-viewer.c:
	Implement get_tab_toolkit.

	Fixes bug #100268, patch from Michael Terry <mike@mterry.name>

2005-06-23  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-notes-viewer.c:
	(nautilus_notes_viewer_set_parent_window):
	Adapt to recent nautilus clipboard API changes.

2005-06-23  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	(editable_connect_callbacks), (editable_disconnect_callbacks),
	(text_buffer_update_sensitivity), (text_buffer_delete_range),
	(text_buffer_mark_set), (text_view_connect_callbacks),
	(text_view_disconnect_callbacks), (merge_in_clipboard_menu_items),
	(initialize_clipboard_component_with_callback_data),
	(nautilus_clipboard_real_set_up),
	(nautilus_clipboard_set_up_text_view):
	* libnautilus-private/nautilus-clipboard.h:
	Properly set text view paste action sensitivity on clipboard changes.
	Fixes #306127.

2005-06-23  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-bookmark-list.c:
	Fix handling of notification of .gtk-bookmark file changes.
	
	* src/Makefile.am:
	* src/nautilus-window-bookmarks.[ch]: 
	* src/nautilus-application.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.[ch]:
	Move most bookmark stuff to nautilus-window-bookmarks and
	put bookmarks in spatial windows too.

2005-06-23  Alexander Larsson  <alexl@redhat.com>

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
	* src/nautilus-bookmark-list.[ch]:
	Share bookmarks with gtk+.
	
	* libnautilus-private/nautilus-file-utilities.[ch]:
	* src/nautilus-window.c: (real_get_title):
	Move compute_default_title to nautilus_compute_title_for_uri.
	
	* libnautilus-private/nautilus-bookmark.[ch]:
	* src/nautilus-bookmarks-window.c: 
	Add has_custom_name boolean to NautilusBookmark
	
	* src/Makefile.am:
	* src/nautilus-bookmark-parsing.[ch]:
	* src/nautilus-navigation-window-menus.c:
	Remove no longer needed files nautilus-bookmark-parsing.[ch].
	
2005-06-20  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(real_update_menus_volumes): Plug a couple leaks. Closes
	bug #307267

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window-menus.c: 
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	Make bookmark menu item action names unique. (#161859)

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_did_not_drag):
	Fix ctrl-unselect in single click mode (#145331)

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	Better font sizes for zooming. (#160080)

2005-06-20  Anders Carlsson  <andersca@imendio.com>

	* src/file-manager/fm-directory-view.c (process_old_files): 
	Plug leak by freeing the sorted list instead.

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (paste_clipboard_data):
	* src/file-manager/fm-tree-view.c: (paste_clipboard_data):
	Fix uninitialized variable warning.

2005-06-20  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-directory-async.c:
	(start_or_stop_io), (file_needs_high_priority_work_done),
	(file_needs_low_priority_work_done):
	Make mime sniffing a high priority job. Prevents activation
	from getting blocked by deep count I/O. (#145560)

2005-06-19  Anders Carlsson  <andersca@imendio.com>

	* src/nautilus-throbber.c (nautilus_throbber_finalize): 
	Free throbber->details after we're done using it.
	
2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c:
	Small delay before turning Loading... into (Empty) to
	avoid flicker.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	Fix iter stamp handling.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (button_press_callback):
	Allow selection of the dummy node. Otherwise things
	got all strange: You could still select it using ranges, and
	if you double clicked on it you activated the old selection.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	On remove, add dummy node before removing file so the
	row isn't collapsed.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_get_value),
	(fm_list_model_unload_subdirectory),
	(fm_list_model_subdirectory_done_loading):
	Keep track of done_loading in parent instead of in dummy node.
	That way it doesn't get lost when the dummy node is recreated.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (fm_list_model_add_file):
	Handle moves between open subdirectories. We handle
	this in file adding when the file already exists in
	the tree, but in another place. This is sort of a hack,
	but is required due to how the list view merges the initial
	change being sent to the original directory and the add to the
	new directory.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Handle duplication of files in two subdirectories at
	the same time.

2005-06-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy):
	Remove subdirectories when destroying the view.

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_get_display_name_collation_key):
	Conditionally use g_utf8_collate_key_for_filename for glib >= 2.7.0

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	Slightly slower auto hover expand.
	
	* src/file-manager/fm-directory-view.c:
	Make add/remove_subdirectory more straightforward.
	Now remove just removes the NautilusDirectory passed in, and
	you're not allowed to add multiple times or remove non-added.
	
	* src/file-manager/fm-list-model.[ch]:
	Actually track the NautilusDirectories that are added to the
	FMDirectoryView so we can easily remove them when the files are
	removed. This was causing problem before where directories for
	removed files weren't removed.

	Emits the subdirectory_unloaded signal when subdirectories go away.

	Add support for unloading subdirectories.
	
	* src/file-manager/fm-list-view.c:
	Unload subdirectories in timeout on collapse.
	remove subdirectories when they get unloaded.

2005-06-16  Anders Carlsson  <andersca@imendio.com>

	* src/nautilus-navigation-window-menus.c 
	(append_dynamic_bookmarks): Unref the action group here too.

2005-06-16  Anders Carlsson  <andersca@imendio.com>

	* src/nautilus-navigation-window-menus.c: (refresh_go_menu):
	Unref the action group after inserting it. This makes
	a NautilusFile memory leak go away.

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c
	add fm_directory_view_get_selection_for_file_transfer and
	use it for all file transfers

	* src/file-manager/fm-list-view.c:
	Implement fm_directory_view_get_selection_for_file_transfer by
	filtering out all files there a parent is also in the selection.
	Do the same for the dnd source list.
	
	* src/file-manager/fm-list-model.c:
	Allow deletion of dummy node so that clearing the model
	doesn't loop forever.

2005-06-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (new_folder_done),
	(new_folder_data_new), (fm_directory_view_new_folder),
	(fm_directory_view_new_file):
	Don't try to setup renaming if the view was already destroyed.
	Fixes a crash when closing a window while creating files/folders.

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-dnd.c:
	No dnd shadow on the desktop.
	Redraw less to get rid of the dnd shadow.
	
	Patch from Matthias Clasen (#307803)

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	Add hover expansion
	
	* src/file-manager/fm-directory-view.[ch]:
	Add support for adding/removing subdirectories.
	
	* src/file-manager/fm-list-model.[ch]:
	Add support for subdirectories making this a tree view.
	
	* src/file-manager/fm-list-view.c:
	Turn listview into a treeview.

	Patch from J√ºrg Billeter <j@bitron.ch>
	
2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-spatial-window.c:
	Add icons for path menu.
	Patch from Vincent Noel <vincent.noel@gmail.com>

2005-06-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_uri_list_drop):
	Check for n_uris instead of real_uri_list. Looks neater.

2005-06-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_uri_list_drop):
	Don't try to start a file operation if there are no real uris
	left after sanitizing the list. Fixes #306246.

2005-06-11  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-emblem-utils.c:
	(nautilus_emblem_install_custom_emblem): Free the path.
	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_new),
	(nautilus_file_operations_progress_new_file): Free markup strings.
	Closes bug #307138.

2005-06-10  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_confirm_deletion): Mark two strings for translation.

2005-06-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (convert_lines_to_str_list):
	* src/file-manager/fm-tree-view.c: (convert_lines_to_str_list):
	Always initialize cut.

	* configure.in:
	Add --Wno-pointer-sign

	Fix gcc4 compilation (#303491/#307038).
	Based on patches from James M. Cape <jcape@ignore-your.tv>
	and Kjartan Maraas <kmaraas@gnome.org>

2005-06-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.11.2 ===

2005-06-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel.

	* NEWS:
	Update for release.

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_value):
	Back out the "(Empty)" vs. "(No subfolders)" change. The string
	is too wide for the tree and gets even wider in some locales.

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-column-chooser.c: (add_buttons):
	Fix conflicting mnemonics in the column chooser (#167475).
	
	Patch from Michael Terry <mike@mterry.name>

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_value):
	Use "(No subfolders)" instead of misleading "(Empty)" label
	if files are not to be shown in the tree. Fixes #85141.

	Patch from Christian Neumair <chris@gnome-de.org>

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-container.c:
	(select_one_unselect_others):
	Reveal icon when selecting it. Fixes #121111.
	
	Based on a patch from Christian Neumair <chris@gnome-de.org>

2005-06-04  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	(nautilus_clipboard_real_set_up):
	Don't setup clipboard twice for the same editing widget.

2005-06-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-manage-views.c: (load_new_location),
	(update_for_new_location):
	Set the displayed location when the location is really
	changed, not when we set out to do it. Fixes the
	"bookmark uri mismatch" warning.

2005-06-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	Fix critical warnings from the new accelerators
	by adding dummy labels.
	
2005-06-03  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-shell-ui.xml: Fix "Zoom In Accel" action.

2005-06-03  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-extension/nautilus-column.c:
	(nautilus_column_class_init):
	* libnautilus-extension/nautilus-menu-item.c:
	(nautilus_menu_item_class_init):
	* libnautilus-extension/nautilus-property-page.c:
	(nautilus_property_page_class_init):
	* libnautilus-private/nautilus-icon-canvas-item.c:
	(nautilus_icon_canvas_item_class_init):
	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_class_init):
	* src/nautilus-window.c: (nautilus_window_class_init):
	Don't mark object property names/descriptions for translation. Fixes
	#135281.

2005-06-02  Sebastien Bacher  <seb128@debian.org>

	* libnautilus-private/nautilus-emblem-utils.c:
	(nautilus_emblem_install_custom_emblem),
	(nautilus_emblem_can_remove_emblem),
	(nautilus_emblem_can_rename_emblem),
	(nautilus_emblem_remove_emblem), (nautilus_emblem_rename_emblem):
	use "hicolor" instead of "gnome" for emblems (Closes: #164629).

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_action_rename):
	Always pre-select the whole name of a directory when renaming it.
	Fixes #306217.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file.c: (compare_by_emblems),
	(get_automatic_emblems_as_integer):
	* libnautilus-private/nautilus-file-private.h:
	Only take user-added emblems ("keywords") into account when sorting by
	emblems. Fixes #166376.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_scroll_event):
	Change scroll zoom modifier to control. Fixes #79352.

	* src/nautilus-shell-ui.xml:
	* src/nautilus-window-menus.c:
	Bind control-= to zoom-in. Fixes #306225.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-tree-view-drag-dest.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-ditem-page.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/nautilus-emblem-sidebar.c
	* src/nautilus-file-management-properties.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-location-bar.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-zoom-controls.c:
	Also declare GtkToggleActionEntry, GtkRadioActionEntry and
	GtkTargetEntry as well as some char and int arrays const.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	Declare GtkActionEntry arrays const. Thanks to Paolo Borelli for
	pointing this out.

2005-06-02  Rodrigo Moya <rodrigo@novell.com>

	* libnautilus-extension/libnautilus-extension.pc.in: added
	extensiondir variable so that extensions can find out via pkg-config
	the dir to install to.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-container.c:
	* libnautilus-private/nautilus-icon-container.h:
	(process_pending_icon_to_rename),
	(nautilus_icon_container_start_renaming_selected_item):
	* src/file-manager/fm-directory-view.c: (start_renaming_file),
	(real_action_rename), (action_rename_callback),
	(action_rename_select_all_callback):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (fm_icon_view_start_renaming_file):
	* src/file-manager/fm-list-view.c: (fm_list_view_start_renaming_file):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Bind shift-f2 to rename whole file. Fixes #131467.

2005-05-27  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Don't display "Properties" background context menu item for Desktop.

2005-05-27  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-location-dialog.c: (nautilus_location_dialog_new):
	Only set dialog transient if a parent window was specified.
	Fixes #142814.

2005-05-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_url_drop):
	Better handling of default action for mozilla dnd drops.

	Patch from Dave Ahlswede

2005-05-27  Christian Persch  <chpe@cvs.gnome.org>

	* src/nautilus-navigation-action.c: (set_tooltip_callback),
	(connect_proxy), (nautilus_navigation_action_finalize),
	(nautilus_navigation_action_set_property),
	(nautilus_navigation_action_get_property),
	(nautilus_navigation_action_class_init),
	(nautilus_navigation_action_init):
	* src/nautilus-navigation-window-menus.c:
	(nautilus_navigation_window_initialize_actions):
	Add specific tooltips to the drop-down arrow of Back/Forward
	toolbar items. Fixes bug #86569.

2005-05-18  Dinoop Thomas  <dinoop.thomas@wipro.com>
	
	* src/nautilus-connect-server-dialog.c:
	(connect_to_server), (nautilus_connect_server_dialog_finalize),
	(nautilus_connect_server_dialog_init), (setup_for_type):
	Added a domain field to enter domain name for Windows share in
	Connect to server dialog.
	Fixes bug #304760.

2005-05-26  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	* src/file-manager/fm-directory-view.c:
	(copy_or_cut_files), (real_update_menus):
	* src/file-manager/fm-tree-view.c:
	(copy_or_cut_files), (create_popup_menu):
	Remove qualifiers from Cut/Copy/Paste, except for "Paste Into
	Folders". Fixes #95112.

2005-05-26  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix empty trash accelerator. Fixes #173059.

	* libnautilus-private/nautilus-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (editable_select_all_callback),
	(text_view_select_all_callback), (action_cut_callback),
	(action_copy_callback), (action_paste_callback),
	(action_select_all_callback), (merge_in_clipboard_menu_items),
	(selection_changed_callback), (nautilus_clipboard_real_set_up),
	(nautilus_clipboard_set_up_editable),
	(nautilus_clipboard_set_up_text_view):
	* libnautilus-private/nautilus-clipboard.h:
	(nautilus_clipboard_set_up_text_view):
	* src/nautilus-notes-viewer.c:
	Add nautilus_clipboard_set_up_text_view, setup clipboard for
	notes text view.

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Fix two possible memory leaks. Kudos to Brian Pepple for tracking this
	issue down and providing a patch. Fixes #305551.

2005-05-25  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_scroll_event),
	(fm_directory_view_class_init):
	Bind shift+scroll to zoom in/out. Fixes #79352.

2005-05-23  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c (nautilus_file_get_string_attribute):
	Change sort order for size, count and time.
	See bug #88585

2005-05-22  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Nicer formatted PKG_CHECK_MODULES() output. (#148355)	

	Patch from Tomasz Kloczko <kloczek@pld.org.pl>

2005-05-22  Martin Wehner  <martin.wehner@gmail.com>

	* components/*
	* help/*
	* icons/*/*
	* libnautilus/*
	* libnautilus-adapter/*
	* omf-install/*
	* user-guide/*
	Remove old cruft, mostly .cvsignore files.

	* autogen.sh:
	Look for libnautilus-private instead of libnautilus.

2005-05-21  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-icon-factory.c:
	* libnautilus-private/nautilus-icon-factory.h:
	(get_smaller_icon_size), (get_larger_icon_size),
	(nautilus_icon_factory_get_smaller_icon_size),
	(nautilus_icon_factory_get_larger_icon_size):
	Make get_(larger|smaller)_icon_size public.

	* src/nautilus-sidebar-title.c:
	(nautilus_sidebar_title_size_allocate),
	(get_best_icon_size):
	Use the best-fitting folder icon for the sidebar
	instead of hardcoding NAUTILUS_ICON_SIZE_LARGE.
	Fixes #48190.

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.11.1 ===

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* icons/*/*:
	Remove old junk.
	
	* configure.in:
	Require eel 2.11.1
	Remove icons/*/Makefile
	
	* NEWS: 
	Update for 2.11.1
	
2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-view.[ch]:
	Add nautilus_view_pop_up_location_context_menu
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-location-bar.c:
	* src/nautilus-spatial-window.c:
	Add location context menu to location button/label.

	Patch from Christian Neumair

2005-05-17  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-spatial-window.c:
	(real_set_allow_up), (nautilus_spatial_window_class_init)
	* src/nautilus-window.c:
	* src/nautilus-window.h:
	(nautilus_window_allow_up), (real_set_allow_up),
	(nautilus_window_class_init):
	Add set_allow_up method to NautilusWindowClass,
	make "Close All Parents" in spatial windows insensitive
	if there are no parent folders.

2005-05-17  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_vfs_error):
	Offer "Skip", "Cancel", "Retry" in XFer Error prompt
	if more than one file is transferred. Otherwise, just
	offer "Cancel" and "Retry".

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* nautilus-folder-handler.desktop.in (Exec):
	Use --no-desktop for default folder handler

2005-05-16  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(action_self_properties_callback), (real_update_menus):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Add "Properties" item to background context menu which displays
	the properties of the currently displayed folder.

2005-05-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-bookmark.c:
	(bookmark_file_changed_callback):
	Don't loop when a bookmarked file is removed
	
	* src/file-manager/fm-directory-view.c: (process_new_files):
	Don't call get_file_info for files no longer in the directory
	(was caused by the ready_to_load call).

	This fixes #165530 and likely #170761

2005-05-12  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-clipboard.c:
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items):
	Don't merge UI twice. Fixes #301854.

2005-05-12  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-location-bar.c:
	(nautilus_location_bar_init):
	Make "Location:" label GDK_ACTION_COPY drag source.
	Fixes #115942.

2005-05-12  David Zeuthen  <david@fubar.dk>

	* libnautilus-private/apps_nautilus_preferences.schemas.in: 
	Change comment for translator note of default desktop font to
	say that Sans shouldn't never be changed. Fixes bug #138731.

2005-05-11  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_get_vfs_method_display_name):
	* data/browser.xml:
	* src/file-manager/fm-directory-view.c:
	Add translator comments. Fixes #145304, #145305, #145307.
	Change "Show Hidden Files" tooltip to infinitive
	construction. Fixes #145306.

2005-05-11  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-directory-async.c:
	(should_look_for_dot_directory_file), (make_dot_directory_uri),
	(link_info_start), (lacks_link_info):
	Kill dotfile-related code. ".directory" supporting schemas have
	gone. Fixes #142343.

2005-05-10  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Remove obsolete window_always_new option from schema.

	Patch from Michael Terry <mike@mterry.name>

2005-05-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix a string conflict between the c-format plural string and
	non-c-format strings. Fixes bug #167344.

	Patch from Changwoo Ryu <cwryu@debian.org>

2005-05-08  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-thumbnails.c:
	(thumbnail_thread_start):
	Don't try to thumbnail files which have been modified in the
	last few seconds to avoid constantly re-thumbnailing them.
	Current cool-off period is three seconds. Fixes bug #107418.

2005-05-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.[ch]:
	(display_pending_files), (fm_directory_view_freeze_updates),
	(fm_directory_view_unfreeze_updates), (queue_pending_files):
	Allow freeze of update processing inside a view.
	
	* src/file-manager/fm-list-view.c:
	(cell_renderer_editing_canceled), (cell_renderer_edited),
	(create_and_set_up_tree_view), (fm_list_view_start_renaming_file):
	Freeze and unfreeze the list view when renaming.

        Workaround for bug #87701: Updates to the list view are put on
	hold during rename to prevent losing editing focus. If too many
	changes are queued while being frozen, further changes are thrown
	away and the view is marked for reload.

2005-05-02  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-window-menus.c:
	Add Ctrl-0 keyboard shortcut to View->Normal Size as
	recommended by the HIG.
	
	Patch from Olav Vitters <olav@bkor.dhs.org>

2005-05-02  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-icon-container.c:
	(keyboard_space): Prevent nautilus from crashing on press of
	Ctrl+Space in an empty directory. Fixes bug #302018.

	Patch from Vinay M R  <vinay.mandyakoppal@wipro.com>
	
2005-05-02  Frederic Crozat  <fcrozat@mandriva.com>

	* libnautilus-private/nautilus-program-choosing.c:
	(nautilus_launch_desktop_file):
	* src/nautilus-application.c:
	(nautilus_application_present_spatial_window_with_selection),
	(nautilus_application_create_navigation_window):
	fix build when startup notification isn't installed.

2005-05-02  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	Remove the ui too.

2005-04-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	Remove "Open New Terminal" from desktop menu.
	Patch from Luca Ferretti <elle.uca@libero.it>

	If you really need this, install the nautilus-open-terminal
	extension. It does this even better than the removed code.
	Also, in newer Metacity there is a a way to set a keybinding
	for "new terminal".
	
2005-04-19  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-main.c: (main): Merge fix for leak
	Bug #172234.

2005-04-19  Christian Neumair  <chris@gnome-de.org>

	* libnautilus-private/nautilus-view-factory.h:
	* src/nautilus-navigation-window.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-manage-views.h:
	* src/nautilus-window.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Improve NautilusViewInfo view factory labels marked for translation.

2005-04-19  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-directory-async.c:
	(read_dot_hidden_file): Plug leaks here too. There
	were three actually :-)

2005-04-18  Dennis Cranston  <dennis_cranston at yahoo com>

	* src/nautilus-connect-server-dialog-main.c: (main)
	Set window icon.
	
2005-04-17  Christian Neumair  <chris@gnome-de.org>

	* src/nautilus-spatial-window.c:
	Add more drop targets to location button.

2005-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (rename_file):
	Remove delayed_rename timeout when registering a new one
	or destroying the view.

2005-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_remove_file):
	Free the stored selection path only when setting a new one.

2005-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files),
	(fm_directory_view_notify_selection_changed):
	Remember if the current selection was already removed
	and don't try to remove it again.
	
	* src/file-manager/fm-list-view.c: (fm_list_view_remove_file):
	Only set a new selection if the removal affects the current selection.
		
2005-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files):
	Unset selection so the same file won't be deleted twice via a binding.

	* src/file-manager/fm-list-view.c: (fm_list_view_end_file_changes),
	(fm_list_view_remove_file), (fm_list_view_finalize),
	(fm_list_view_class_init):
	Store the new selection and set it after a batch of changes,
	not on every removal. Speeds up deleting from the list view
	by preventing a redraw for each removed file.

2005-04-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Use label instead of entry if not editable.
	(#149201)
	
	Patch from Michael Terry

2005-04-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-notes-viewer.c:
	Fix missing include.

2005-04-04  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file.c: (nautilus_file_matches_uri):
	Don't leak file_uri.

2005-04-04  Diego Gonzalez  <diego@pemas.net>

	* libnautilus-private/Makefile.am: remove nautilus-theme.[c-h]
	  from the build process.
	* libnautilus-private/nautilus-icon-factory.c:
	  (load_thumbnail_frame) remove the need to use the deprecated
	  nautilus themes.
	* libnautilus-private/nautilus-icon-canvas-item.c:
	  (draw_strech_handles), (it_test_stretch_handle):
	  remove the need to use the deprecated nautilus themes.
	* libnautilus-private/nautilus-thumbnails.c:
	* libnautilus-private/nautilus-icon-factory.c:
	  remove nautilus-theme.h include

	* src/nautilus-navigation-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-notes-viewer.c:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-toolbars.c:
	* src/nautilus-zoom-control.c:
	  remove nautilus-theme.h include

	* src/nautilus-sidebar-title:
	 (nautilus_sidebar_title_select_text_color): remove use of
	 old theme stuff and adapt the shadow offset, made it equal to 1,
	 which is the default.
	 (nautilus_sidebar_title_theme_changed): remove, as there will be
	 no sidebar theme changes.
	 (nautilus_sidebar_title_init): remove the theme_changed callback, as
	 there will not be sidebar theme changes anymore.

	 * src/nautilus-notes-viewer.c:
	 (nautilus_notes_viewer_init): remove use of old theme stuff.

	* icons/Makefile.am: don't install old theme stuff.

2005-03-31  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-31  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_get_uri_shortname_for_display): Plug the leak.

2005-03-31  Martin Wehner  <martin.wehner@gmail.com>

	* icons/audio.svg:
	New svg icon from Corey Woodworth <CoreyWoodworth@gmail.com>

	* icons/audio.png:
	Remove old file.	

	* icons/Makefile.am:
	Install new icon.

	* libnautilus-private/nautilus-icon-canvas-item.c:
	(real_map_pixbuf):
	Use svg instead of bitmap audio preview emblem.

	Patch from Jaap Haitsma <jaap@haitsma.org>
	
2005-03-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-spatial-window.c: (get_dnd_icon_size),
	(location_button_drag_begin_callback), (get_data_binder),
	(location_button_drag_data_get_callback),
	(nautilus_spatial_window_instance_init):
	Allow drag and drop operations with location bar icon.

	Patch from Christian Neumair <chris@gnome-de.org>

2005-03-30  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(nautilus_file_operations_progress_update),
	(nautilus_file_operations_progress_destroy),
	(nautilus_file_operations_progress_init),
	(time_remaining_callback), (nautilus_file_operations_progress_new),
	(nautilus_file_operations_progress_set_operation_string),
	(nautilus_file_operations_progress_new_file):
	* libnautilus-private/nautilus-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Change layout of the progress dialog to be more HIG compliant.	

	Patch from Michiel Sikkes <michiel@eyesopened.nl>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	Add elipses to "Create Launcher" menu item. (#95113)
	
	Based on a patch from Christian Neumair <chris@gnome-de.org>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(eject_for_type), (volume_delete_dialog),
	(nautilus_desktop_link_monitor_delete_link):
	Reference the proper context menu item in the volume
	delete dialog of network volumes. Fixes bug #152391.
	
	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_merge_menus):
	Remove hard coded script directory path from tooltip message.
	Fixes bug #161905.
	
	Patch from Michael Terry <mike@mterry.name>
	
2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/nautilus-connect-server-dialog.c: (connect_to_server):
	* src/nautilus-location-bar.c:
	(nautilus_location_bar_get_location),
	(nautilus_location_bar_update_label):
	* src/nautilus-location-dialog.c: (open_current_location):
	Replace eel_make_uri_from_input with the gnome-vfs equivalent.
	Closes bug #165743.

	Patch from Christian Kellner <gicmo@gnome.org>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-bookmark.c:
	(nautilus_bookmark_compare_with), (nautilus_bookmark_compare_uris),
	(bookmark_file_changed_callback):
	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_internal):
	* src/file-manager/fm-properties-window.c:
	(is_merged_trash_directory):
	* src/nautilus-application.c:
	(nautilus_application_present_spatial_window_with_selection):
	* src/nautilus-location-bar.c:
	(nautilus_location_bar_update_label):
	* src/nautilus-window-manage-views.c: (set_displayed_location),
	(check_bookmark_location_matches), (handle_go_elsewhere),
	(got_file_info_for_view_selection_callback):
	Use gnome_vfs_uris_match instead of eel_uris_match. (#155852)

	Patch from Paolo Borelli <pborelli@katamail.com>

2005-03-23  Fernando Herrera  <fherrera onirica com>

	* src/nautilus-connect-server-dialog-main.c: (main): call
	gnome_authentication_manager_init to use gnome-vfs auth 
	callbacks.

2005-03-23  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-desktop-window.c:
	Remove unused code. We avoid flicker in other ways.
	
2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.11.1
	Gnome 2.10 versions are now on the gnome-2-10 branch.

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-location-entry.c:
	Minor cleanup from Jaap Haitsma <jaap@haitsma.org>

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-window-info.[ch]:
	Add nautilus_window_info_show_window call.
	
	* src/file-manager/fm-directory-view.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window.[ch]:
	Implement and call the new show_window call.
	This allows us to set up the EelBackground before
	showing the window, causing less flicker (#169347)

	Patch from Nickolay V. Shmyrev  
	
2005-03-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.10.1 (for EelBackground changes)
	
	* libnautilus-private/nautilus-icon-dnd.c:
	* libnautilus-private/nautilus-directory-background.c:
	Use the background setting now in eel.
	Delay background setting slightly after gconf change to group
	together multiple changes. (#169347)

	Patch from Nickolay V. Shmyrev

2005-03-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require gtk 2.6.0

2005-03-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	Re-add keybinding to "Show Hidden Files".
	Patch from Dave Ahlswede <mightyquinn@letterboxes.org>

2005-03-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Disable "Select Pattern" for empty folders. (#169817)
	Patch from Raj <ringuva@novell.com>

2005-03-10  Vincent Noel  <vnoel@cox.net>

	* src/nautilus-spatial-window.c:
	(location_button_clicked_callback),
	(nautilus_spatial_window_instance_init): Use GTK_ICON_SIZE_MENU
	for the location button icon instead of GTK_ICON_SIZE_BUTTON
	(#169669).

2005-03-10  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added "xh" to ALL_LINGUAS.

2005-03-07  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.10.0 ===
	
2005-03-07  Martin Wehner  <martin.wehner@gmail.com>

	* THANKS:
	Update for release
	
	* check-THANKS.pl:
	Extract names from ChangeLog bodies too. (#43452)
	Patch from Richard Hoelscher <rah@rahga.com>

2005-03-07  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.10.0
	
	* configure.in:
	Bump version to 2.10.0, require eel 2.10.0

2005-03-03  Elijah Newren  <newren@gmail.com>

	If launched without startup-notification, make an approximation to
	when the launch occurred so that focus-stealing-prevention will
	work better.

	* src/nautilus-main.c: (slowly_and_stupidly_obtain_timestamp): new
	function, (main): if no startup id provided, ping xserver for a
	timestamp and make a dummy startup_id with it.

	* src/nautilus-application.c: (end_startup_notification): don't
	set _NET_STARTUP_ID if given a fake startup_id, remove commented
	out warning that should now no longer be needed

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-file-management-properties.glade:
	Center dialog. Patch from Christian Neumair <chris@gnome-de.org>.

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.9.92 ===
	
2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* data/applications.desktop.in:
	* data/favorites.desktop.in:
	Remove old files.
	
	* docs/Makefile.am (EXTRA_DIST):
	Remove nautilus-context-menus.txt from makefile

	* NEWS:
	Update for release

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (create_and_set_up_tree_view):
	Make the backspace key open the parent folder in the
	list view like it does in the icon view. (#142891)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-desktop-link.c:
	(nautilus_desktop_link_can_rename):
	Make Computer icon renameable. (#154122)
	Patch from Tim Savannah <opticcow@linux-militia.net>

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libnautilus-private/nautilus-file-operations-progress.c:
	(time_remaining_callback):
	Don't show ETA if bytes_copied > bytes_total.
	Prevents miscalculated ETAs from being shown. (#158614)
	Based on a patch from John Spray <jcs116@york.ac.uk>

2005-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Make show_original work (had a typo)
	Make where use original file, not target.
	Fixes location display for desktop icons.
	
2005-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	deep count on target files, not original files.
	Fixes properties for e.g. home icon on desktop.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-23  Alexander Larsson  <alexl@redhat.com>

	* docs/nautilus-context-menus.txt:
	Remove old docs.

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-icon-file.c:
	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_delete):
	* libnautilus-private/nautilus-file.c: (nautilus_file_can_rename),
	(rename_guts), (nautilus_file_get_drop_target_uri):
	* src/file-manager/fm-desktop-icon-view.c:
	(trash_link_is_selection):
	* src/file-manager/fm-icon-container.c: (get_sort_category):
	* src/file-manager/fm-properties-window.c:
	(get_target_file_for_original_file):
	Handle nautilus_desktop_icon_file_get_link() returning NULL.
	Likely fixes bug #145971

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c: (should_show_mime_type):
	Remove stale comment.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c: (end_startup_notification):
	Don't give critical warnings if we have no startup_id.
	
	* src/nautilus-window.c: (nautilus_window_update_icon):
	Use names and not pixbufs for the window icons.
	This means the icons of the best size are used.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c: (create_window):
	* src/nautilus-window-private.h:
	* src/nautilus-window.c: (nautilus_window_init),
	(nautilus_window_finalize):
	Remove unneeded startup_id.

2005-02-22  Martin Wehner  <martin.wehner@gmail.com>

	* MAINTAINERS:
	Update my email address.

2005-02-21  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_supports_uri):
	Use EEL_DESKTOP_URI instead of "x-nautilus-desktop:".
	
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-18  Paolo Borelli  <pborelli@katamail.com>

	*  libnautilus-private/nautilus-icon-container.c (popup-menu):
	fix #136578 (Menu key should pop up context menu).

2005-02-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (should_show_open_with):
	Don't show open with property page for desktop files and
	desktop special icons.

2005-02-17  Martin Wehner  <martin.wehner@epost.de>

	* src/nautilus-navigation-window-menus.c:
	(add_bookmark_for_current_location):
	Only add a bookmark once for a given location.
	Fixes #161862.
	
	Patch from egeetha@novell.com

2005-02-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c:
	* src/nautilus-shell.c:
	Fixes to the startup notification stuff.
	Patch from Elijah Newren <newren@gmail.com>

2005-02-14  Alexander Larsson  <alexl@redhat.com>

	* data/applications.desktop.in:
	* data/favorites.desktop.in:
	* src/network-scheme.desktop.in:
	* nautilus-computer.desktop.in:
	* nautilus-folder-handler.desktop.in:
	* nautilus-home.desktop.in:
	* nautilus.desktop.in:
	Enable startup notification.
	
	* src/nautilus-application.c:
	* src/nautilus-application.h:
	* src/nautilus-bookmarks-window.c:
	* src/nautilus-connect-server-dialog-nonmain.c:
	* src/nautilus-location-bar.c:
	* src/nautilus-main.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-shell-interface.idl:
	* src/nautilus-shell.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.c:
	Handle startup notification across corba activation.
	Patch from Elijah Newren <newren@gmail.com>

2005-02-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-model.c:
	Don't do any i/o on tree roots until they are opened.
	This means you don't get any auth dialogs.
	Removed the monitor on the root file totally, as that should
	not normally change/go away anyway (and it was doing i/o).
	
	This changes semantics in the file a bit, we now have a dummy
	row also if node->directory != NULL and node->parent == NULL.

2005-02-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.9.91 ===
	
2005-02-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump eel requires

	* NEWS:
	Update for release

2005-02-09  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* nautilus-folder-handler.desktop.in:
	Add new default folder handler NoDisplay desktop file
	
	* nautilus.desktop.in:
	Add %U to exec line
	
	* src/Nautilus_shell.server.in:
	Remove all the bonobo components we no longer support
	
	* src/file-manager/fm-directory-view.c:
	Allow open with menu on folders (#151747)
	
2005-02-08  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(fm_list_view_start_renaming_file):
	Set original_name to the new name as cell_renderer_edited()
	might be called multiple times if the view looses focus.
	Fixes bug #166120.

2005-02-07  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-properties-window.c: (get_original_file),
	(name_field_done_editing), (update_properties_window_title):
	Handle disappearing original_files without crashing.
	Fixes bug #151024/158904.

2005-02-07  Martin Wehner  <martin.wehner@epost.de>

	* configure.in:
	Revert libexif change as it breaks the build with new libexif.
        
2005-02-06  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp),
	(nautilus_launch_show_file), (nautilus_launch_application),
	(nautilus_launch_desktop_file):
	Use new gnome_desktop_item_set_launch_time() API. (#166334)

	* configure.in:
	Require gnome-desktop 2.9.91
		
	Patch from Elijah Newren <newren@gmail.com>

2005-02-06  Martin Wehner  <martin.wehner@epost.de>

	* configure.in:
	Make libexif dependency optional again. (#165773)

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Make default desktop font localizable. (#138731)
	
	Patch from Takao Fujiwar <takao.fujiwara@sun.com>

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* data/Makefile.am:
	* data/static_bookmarks.xml:
	Remove unused file.

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(real_update_menus): Added mnemonic for Browse Folder option.
	* src/file-manager/fm-desktop-icon-view.c:
	(real_update_menus): Added mnemonic for Empty Trash option.
	Fixes #162307.
	
	Patch from Dinoop Thomas <dinoop.thomas@wipro.com>
	
2005-02-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (net_workarea_changed):
	Fix workarea detection on 64bit machines.
	Patch from Ian Wienand <ianw@gelato.unsw.edu.au>

2005-02-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(clipboard_targets_received):
	Handle destroyed windows
	
	* src/nautilus-window.c: (nautilus_window_destroy):
	cancel outstanding view as callbacks

	Fixes #165938

2005-01-31  Kjartan Maraas  <kmaraas@gnome.org>

	* libnautilus-private/nautilus-directory-background.c:
	(image_loading_done_callback): Free the color string.
	Closes bug #154204.

2005-01-30  Sven Herzberg  <herzi@gnome-de.org>

	reviewed by: Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-file-operations.c:
	change the strings for move/copy/link/delete from "Files Moved:" to
	"Moving file:", fixes #154839

2005-01-28  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c:
	Fix leak

	* Makefile.am:
	Remove unnecessary stuff

2005-01-28  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-actions.h:
	* src/nautilus-desktop-window.c:
	(nautilus_desktop_window_instance_init):
	Disable close action on desktop window (#160100)

2005-01-27  Martin Wehner  <martin.wehner@epost.de>

	* src/nautilus-main.c: (register_icons):
	Don't try to free NULL icon info.

2005-01-27  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-file.c:
	(nautilus_file_compare_for_sort_by_attribute):
	Don't compare NULL values from files we can't get permissions for.
	Fixes bug #153890.

2005-01-27  Chris Lahey  <clahey@ximian.com>

	* acconfig.h, configure.in, src/nautilus-image-properties-page.c:
	Support the API change in libexif > 0.5.12.

2005-01-27  Kjartan Maraas  <kmaraas@gnome.org>

	* src/nautilus-main.c: Don't leak the icon info

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-spatial-window.c:
	Make path button more obvious. #145237
	Patch from  Michael Henson <mike@axl.net>

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (ask_link_action):
	Set focus_on_map for dnd ask dialog to avoid it ending
	up under the browser window.
	Patch from Jorn Baayen <jbaayen@gnome.org>

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(confirm_empty_trash):
	No title on dialog.
	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2001-01-26  Ryan Lortie  <desrt@desrt.ca>
	* libnautilus-private/nautilus-file-operations.c:
	(handle_transfer_overwrite): Trivial string fix.

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (cancel_activate),
	(activate_weak_notify), (cancel_activate_callback):
	weak_unref the view if we cancel the activation.
	Might fix #145789

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== nautilus 2.9.90 ===
	
2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* MAINTAINERS:
	Add Martin, remove Darin.
	Update daves email address.

	* configure.in:
	Bump version to 2.9.90
	Require eel 2.9.90

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c (confirm_empty_trash):
	Fix typo.

2005-01-25  Padraig O'Briain  <padraig.obriain@sun.com>

	* libnautilus-private/nautilus-icon-container.c: 
	(nautilus_icon_container_accessible_selection_changed_cb): Omit call
	to nautilus_icon_container_accessible_update_selection.
	(nautilus_icon_container_accessible_ref_selection):
	(nautilus_icon_container_accessible_get_selection):
	(nautilus_icon_container_accessible_remove_selection): All call
	to nautilus_icon_container_accessible_update_selection.

	Fixes bug #160087.
	 
2005-01-24  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c (action_about_nautilus_callback):
	WE WANT THE CHEESEPUFF!!!

2005-01-24  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-operations.c:
	(confirm_empty_trash):
	Use warning icon instead of info one.
	Use GtkMessageDialog.
	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-23  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Remove "Reset Background" entry from folder context menus.
	
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-01-21  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* src/nautilus-window-menus.c: Correct License (It said Evince).

2005-01-21  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Add license to about dialog.
	Change copyright statement.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-20  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Fix sidebar_width typo in gconf schema (#162204).

	Patch from J. Christopher Six <j.christopher.six@gmail.com>

2005-01-20  Martin Wehner  <martin.wehner@epost.de>

	* libnautilus-private/nautilus-column-chooser.c:
	(button_new_with_mnemonic), (add_buttons):
	Add stock arrow icons to "Move Up/Down" buttons.

	Patch from Michael Gossard <michael.gossard@free.fr>

2005-01-19  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c: (action_about_nautilus_callback):
	Use GtkAboutDialog.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-19  Alexander Larsson  <alexl@redhat.com>

	* nautilus-home.desktop.in:
	Fix icon
	
	* nautilus.desktop.in:
	Put in menus.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-18  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-main.c: (main):
	* src/nautilus-window.c: (nautilus_window_class_init):
	Better default icon.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-01-17  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-connect-server-dialog.c: (connect_to_server):
	Don't use destroyed dialog.
	Patch from Vincent Untz <vincent@vuntz.net>.

2005-01-16  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* src/file-manager/fm-icon-view.c: Applied patch from Tierry
	Moisan that resolves trivial bug #159128.

2005-01-14  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/nautilus-connect-server-dialog-main.c: (dialog_destroyed),
	(show_uri), (nautilus_connect_server_dialog_present_uri), (main):
	* src/nautilus-connect-server-dialog-nonmain.c:
	(nautilus_connect_server_dialog_present_uri):
	* src/nautilus-connect-server-dialog.c: (connect_to_server),
	(response_callback), (nautilus_connect_server_dialog_new):
	* src/nautilus-connect-server-dialog.h:
	Make connect to server dialog availible as separate application.

	Patch from Vincent Untz <vincent@vuntz.net>
	
2005-01-14  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.[ch]:
	New function nautilus_ensure_unique_file_name

	* libnautilus-private/nautilus-link.[ch]:
	* libnautilus-private/nautilus-link-desktop-file.[ch]:
	Uniquify name for nautilus_link_local_create if requested.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_url_drop):
	Uniquify desktop link name

	Patch from Jorn Baayen <jbaayen@gnome.org>

2005-01-13  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.[ch]:
	* libnautilus-private/nautilus-marshal.list:
	Add handle_url signal
	Fix argument list for handle_uri_list

	* libnautilus-private/nautilus-dnd.[ch]:
	Add nautilus_drag_default_drop_action_for_url
	
	* libnautilus-private/nautilus-icon-dnd.c: (receive_dropped_url),
	(nautilus_icon_container_get_drop_action),
	(drag_data_received_callback):
	Handle URL drops separately from URI_LIST
	Set different actions for URL drop
	
	* libnautilus-private/nautilus-tree-view-drag-dest.[ch]:
	(get_drop_action), (receive_dropped_uri_list),
	(receive_dropped_url), (drag_data_received_callback),
	(nautilus_tree_view_drag_dest_class_init):
	Add handle_url and handle_uri lists
	Set different actions for URL drop
	Fix bug that made url_list & url drops not work
	
	* src/file-manager/fm-directory-view.[ch]: (revert_slashes),
	(ask_link_action), (fm_directory_view_handle_url_drop),
	(fm_directory_view_handle_uri_list_drop):
	Move url and uri_list drop handling here. Make it handle
	url drops better.
	
	* src/file-manager/fm-icon-view.c: (icon_view_handle_url),
	(icon_view_handle_uri_list), (fm_icon_view_init):
	* src/file-manager/fm-list-view.c: (list_view_handle_url),
	(list_view_handle_uri_list), (create_and_set_up_tree_view):
	Call up to the drop code in directory view.

	The above is based on a patch from Jorn Baayen <jbaayen@gnome.org>

	* libnautilus-private/nautilus-directory.c:
	(nautilus_directory_schedule_metadata_copy):
	Handle source_directory being NULL. (happens on toplevel uri)

	* libnautilus-private/nautilus-file-operations.c:
	(nautilus_file_operations_copy_move):
	Handle source_dir_uri being NULL. (happens on toplevel uri)

	* libnautilus-private/nautilus-link-desktop-file.c:
	(nautilus_link_desktop_file_local_create):
	Use right icon field
	
2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(volume_or_drive_unmounted_callback),
	(volume_or_drive_ejected_callback),
	(action_unmount_volume_callback), (action_eject_volume_callback),
	(real_update_menus_volumes):
	* src/file-manager/nautilus-directory-view-ui.xml:
	Allow eject on unmounted devices.
	Patch from Magnus Damm <magnus.damm@gmail.com>

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Don't user GNOME_DESKTOP_ITEM_LOAD_ONLY_IF_EXISTS, it doesn't mean
	what you think, it means don't load if the app the desktop file
	references doesn't exist.

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-link-historical.c:
	* libnautilus-private/nautilus-link-historical.h:
	Remove historical link support.
	
	* libnautilus-private/nautilus-link-desktop-file.[ch]:
	* libnautilus-private/nautilus-link.[ch]:
	Remove historical link support and unused functions.
	
	* src/file-manager/fm-directory-view.h:
	Remove unused declaration.
	
	* src/file-manager/fm-icon-view.c:
	Fix up due to small api change for nautilus-link.
	
	* src/file-manager/fm-properties-window.c: (set_icon_callback):
	Fix icon change for desktop files that point to nonexisting binaries.

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-main.c (register_icons):
	Remove debug spew

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_icon_for_file):
	Special case icons for burn: and computer:
	
	* src/nautilus-main.c: (register_icons):
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-window-menus.c:
	Fix up icons and names in go/places menu.
	Fixes #162750 and #149941

	Based on patch from dennis_cranston@yahoo.com and Jaap A. Haitsma

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c (real_set_title):
	Make window title "location - File Browser", not "File Browser: location".
	Fixes #149008. Patch by Gustavo Carneiro.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== nautilus 2.9.2 ===
	
2004-01-11  James Henstridge  <james@jamesh.id.au>

	* test/Makefile.am: don't define GNOMELOCALEDIR in INCLUDES.

	* src/Makefile.am: remove desktop and server files on clean.
	Don't include GNOMELOCALEDIR in INCLUDES, since it is now defined
	in config.h.

	* Makefile.am: remove desktop files on clean, and intltool files
	on distclean.

	* acconfig.h: remove, since it isn't needed anymore.

	* configure.in: remove some macro calls not needed with newer
	automakes, and use newer versions of some macros.

	* autogen.sh: require Automake >= 1.7.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* configure.in:
	Require eel 2.92.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in (STARTUP_NOTIFICATION_PACKAGE):
	Add back mk.

2005-01-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in (STARTUP_NOTIFICATION_PACKAGE):
	Remove mk for ALL_LINGUAS since it broke the build.

2004-12-17  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.c: (load_icon_file):
	Don't use frames for images with alpha.

	Patch from Jaap Haitsma <jaap@haitsma.org>
	
2004-12-15  Vijaykumar Patwari <vijaykumar.patwari@wipro.com>

	* src/nautilus-bookmarks-window.[ch]:
	(open_selected_bookmark): New function, choose if to open in 
	parent or new window.
	(get_bookmark_nautilus_navigation_window_new): Get New window.
	(on_jump_button_clicked): Call open_selected_bookmark.
	(on_row_activated): Call open_selected_bookmark.
	* src/nautilus-navigation-window-menus.c: 
	(get_or_create_bookmarks_window): Reset signals for the 
	edit bookmark dialog.
	fixes bug #160224.
	
2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.6.0
	
	* libnautilus-private/nautilus-file-utilities.c:
	(nautilus_get_uri_shortname_for_display):
	* libnautilus-private/nautilus-file.c:
	(nautilus_file_get_display_name_nocopy):
	Use g_filename_display_basename() for display names

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(fm_list_view_start_renaming_file):
	* src/file-manager/fm-properties-window.c:
	(name_field_done_editing):
	Make sure we don't rename files if the name was never
	changed from the original display name.

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-location-dialog.c: (nautilus_location_dialog_new):
	Fill in ctrl-l dialog correctly for desktop.
	
	Patch from Matthew Gatto <poobar@nycap.rr.com>

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(nautilus_icon_container_update_icon):
	* libnautilus-private/nautilus-icon-factory.c: (load_icon_file):
	* libnautilus-private/nautilus-thumbnails.c:
	(nautilus_thumbnail_frame_image),
	(nautilus_thumbnail_load_framed_image):
	* libnautilus-private/nautilus-thumbnails.h:
	Better handling of icon sizes, including
	framing of large file-as-icon images.

	Patches from Jaap Haitsma <jaap@haitsma.org>

2004-12-13  Dwayne Bailey  <dwayne@translate.org.za>

	* configure.in: Added "zu" to ALL_LINGUAS.

2004-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-desktop-link-monitor.c:
	(destroy_desktop_link_monitor),
	(nautilus_desktop_link_monitor_get), (volume_file_name_used),
	(nautilus_desktop_link_monitor_make_filename_unique),
	(create_volume_link), (nautilus_desktop_link_monitor_init):
	* libnautilus-private/nautilus-desktop-link-monitor.h:
	* libnautilus-private/nautilus-desktop-link.c:
	(nautilus_desktop_link_new_from_volume):
	Make sure volume filenames are unique (#153888)

2004-12-12  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-clipboard.c (merge_out_clipboard_menu_items):
	Disconnect from right object.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(add_application_to_open_with_menu), (real_update_menus):
	Fix underscore escaping in open with menu.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-bookmark.c:
	(nautilus_bookmark_get_pixbuf):
	Force size for pixbufs.
	
	* libnautilus-private/nautilus-icon-factory.c: (load_icon_file):
	Load force-sized svgs right.
	(nautilus_icon_factory_get_pixbuf_from_name):
	Allow force-size loading
	
	* libnautilus-private/nautilus-icon-factory.h:
	Allow force-size loading in nautilus_icon_factory_get_pixbuf_from_name
	
	* libnautilus-private/nautilus-ui-utilities.c:
	(nautilus_action_from_menu_item),
	(nautilus_toolbar_action_from_menu_item):
	* src/nautilus-emblem-sidebar.c: (create_emblem_widget):
	* src/nautilus-property-browser.c: (make_drag_image),
	(make_properties_from_directories):
	* src/nautilus-sidebar-title.c: (update_icon):
	* src/file-manager/fm-directory-view.c:
	(add_extension_action_for_files):
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	* src/file-manager/fm-tree-model.c:
	(tree_node_get_pixbuf_from_factory):
	
	Force-size load icons
	
	* src/nautilus-throbber.c: (nautilus_throbber_instance_init),
	(nautilus_throbber_finalize):
	Disconnect icon theme changed signal on finalize.

2004-11-29  Alexander Larsson  <alexl@redhat.com>
	
	* libnautilus-private/nautilus-file-dnd.c:
	(nautilus_drag_can_accept_item):
	Handle drags to desktop items.

2004-11-29  Dwayne Bailey  <dwayne@translate.org.za>

	* configure.in: Added "nso" to ALL_LINGUAS.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c:
	(canvas_position_to_grid_position):
	Fix positioning. Makes find_new_empty_spot tighter.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-container.c: (snap_position),
	(find_empty_location):
	Fix a few typos in icon placement.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-11-25  Marco Pesenti Gritti  <marco@gnome.org>

	* src/file-manager/Makefile.am:

	No need to define VERSION here, it's aleady in
	config.h. Fix the build.

2004-11-25  Marco Pesenti Gritti  <marco@gnome.org>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* configure.in:

	Bump gnome-vfs required version

	* libnautilus-private/nautilus-mime-actions.c:
	(nautilus_mime_get_default_application_for_file),
	(application_equal), (get_open_with_mime_applications),
	(nautilus_mime_get_open_with_applications_for_file),
	(nautilus_mime_get_applications_for_file),
	(nautilus_mime_has_any_applications_for_file):
	* libnautilus-private/nautilus-mime-actions.h:
	* libnautilus-private/nautilus-program-choosing.c:
	(nautilus_launch_show_file), (nautilus_launch_application):
	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(activate_check_mime_types):
	* src/nautilus-information-panel.c: (command_button_callback),
	(add_command_buttons), (nautilus_information_panel_update_buttons):

	Remove all mime api deprecated calls and replace them with the
	new API. Fix bug #159435.

2004-11-24  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	Post release version bump

=== nautilus 2.9.1 ===
	
2004-11-24  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2004-11-22  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-undo-signal-handlers.c:
	Fix include.

2004-11-22  Alexander Larsson  <alexl@redhat.com>
        * Merge bonobo-slay-branch
	
2004-11-22  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window.c: (action_view_as_callback),
	(nautilus_window_synch_view_as_menus):
	Don't reenter action callback when switching views.

2004-11-19  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(can_show_default_app), (real_update_menus): Fix some jumping
	menus.
	* test/Makefile.am: Don't link to libnautilus

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-mime-actions.c:
	removed unneeded includes
	
	* src/nautilus-application.c:
	* src/nautilus-desktop-window.c:
	Removed app_id property on NautilusWindow
	
	* src/nautilus-main.c: (main):
	Remove old code
	
	* src/nautilus-navigation-window.c:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-window-menus.c:
	* src/file-manager/fm-ditem-page.c:
	Remove bonobo comments
	
	* src/nautilus-window.c:
	Remove app_id property
	fix last bonobo details
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	remove edit launcher action

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel
	
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-actions.h:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window.[ch]:
	Implement some accels as GtkBindings instead to avoid
	overriding widget-specific keybindings like "delete" and "backspace".

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	* src/nautilus-window-private.h:
	Put location entry etc in a toolbar.

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file.c: (is_desktop_file),
	(nautilus_file_is_nautilus_link):
	Don't check for "application/x-gnome-app-info", as that is already
	handled by the alias system. This also avoids stating for a
	mimetype xml file.
	
	* src/nautilus-throbber.c:
	Don't create a new icon theme for each throbber.
	Use GtkIconTheme instead of GnomeIconTheme
	
	* libnautilus-private/nautilus-ui-utilities.[ch]:
	New function nautilus_ui_string_get to cache the loaded ui files.
	
	* src/nautilus-navigation-window.c:
	Remove old bonoboui stuff
	
	* src/nautilus-navigation-window-menus.c:
	Open New window is Ctrl-N.
	Use the new nautilus_ui_string_get call
	
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c: 
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Use the new nautilus_ui_string_get call
	
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	Name separators to work around bug #158620
	
2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	* src/file-manager/nautilus-list-view-ui.xml:
	* src/nautilus-actions.h:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window.[ch]:
	Add all extra accellerators and clean up ui files.

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-window-menus.c:
	* src/nautilus-window-toolbars.c:
	* libnautilus-private/nautilus-ui-utilities.[ch]:
	(nautilus_action_from_menu_item), (nautilus_toolbar_action_from_menu_item):
	Move code to utility functions.

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-file-utilities.[ch]:
	* src/nautilus-spatial-window.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-window-menus.c:
	Move some functions to nautilus-ui-utilities
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-ui-utilities.[ch]:
	Various ui utility functions
	
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c: 
	* src/file-manager/fm-list-view.c:
	Unmerge everything on destroy
	
	* src/nautilus-shell-ui.xml:
	Remove unused stuff
	
2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-clipboard-monitor.c:
	Handle ownership changes from XFixes
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-clipboard-ui.xml:
	Remove (is now inline)
	
	* libnautilus-private/nautilus-clipboard.[ch]:
	Convert to GtkUIManager
	
	* src/nautilus-location-bar.c:
	* src/nautilus-notes-viewer.c:
	Adapt to NautilusClipboard changes

	* src/nautilus-window-menus.c:
	Remove duplicated action

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	Adapt to NautilusClipboard changes
	Fix paste into folder to not use stock accelerator

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove references to throbber
	
	* src/Makefile.am:
	* src/nautilus-throbber.[ch]:
	Moved throbber here and made it not be a bonobo object
	
	* src/nautilus-window-private.h:
	* src/nautilus-window-toolbars.c:
	Work with the throbber

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-application.c:
	* src/nautilus-navigation-window.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.c:
	Make initial window geometry work.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-image-properties-page.c: (get_property_pages):
	Only show for images.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.h:
	Don't include libnautilus files.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/nautilus-navigation-window.c:
	* src/nautilus-desktop-window.c:
	Remove old defines

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-shell-ui.xml:
	Make the menus look like pre-bonobo-removal

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	Don't have use default background on desktop context menu.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Remove libnautilus-adapter subdir
	
	* components/Makefile.am:
	Don't build throbber atm
	
	* src/nautilus-navigation-action.c:
	Use GtkMenuToolButton instead of NautilusArrowToolbutton
	
	* src/Makefile.am:
	* src/nautilus-arrow-toolbutton.[ch]:
	Remove.

2004-11-16  Anders Carlsson  <andersca@gnome.org>

	* libnautilus-private/nautilus-window-info.c:
	(nautilus_window_info_get_ui_manager):
	It's NULL now, not CORBA_OBJECT_NIL.
	
2004-11-16  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-view.h:
	remove bonoboui inclide
	
	* src/nautilus-navigation-action.[ch]:
	Add navigation GtkAction, based on epi code
	
	* src/nautilus-window-menus.c:
	* src/nautilus-window-toolbars.c:
	Correctly handle toolbar icons for extensions

2004-11-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Remove bonoboui dependencies
	
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-bonobo-extensions.[ch]:
	* libnautilus-private/nautilus-bonobo-ui.h:
	Remove unneeded files
	
	* libnautilus-private/nautilus-clipboard.c:
	Comment out for now.
	
	* libnautilus-private/nautilus-directory-metafile-monitor.c:
	* libnautilus-private/nautilus-metafile.c:
	* src/nautilus-application.c: 
	* src/nautilus-history-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-main.c: (main):
	* src/nautilus-notes-viewer.c:
	* src/nautilus-sidebar-title.c:
	* src/file-manager/fm-properties-window.c:
	Remove bonobo includes
	
	* libnautilus-private/nautilus-file-utilities.[ch]:
	(nautilus_get_ui_directory), (nautilus_ui_file):
	Util functions for ui files.
	
	* libnautilus-private/nautilus-view.[ch]:
	* libnautilus-private/nautilus-window-info.[ch]:
	Remove bonoboui methods
	
	* src/Makefile.am:
	Add new files, remove some old ones
	Move ui files to datadir/nautilus/ui
	
	* src/nautilus-actions.h:
	New file with action names
	
	* src/nautilus-arrow-toolbutton.[ch]:
	New widget for back/forward buttons.
	
	* src/nautilus-desktop-window.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-spatial-window-ui.xml:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-manage-views.[ch]: 
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window-toolbars.c:
	* src/nautilus-window.[ch]:
	Initial port to GtkUIManager
	
	* src/nautilus-profiler.[ch]:
	Remove
	
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-actions.h:
	New file with action names
	
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.[ch]: 
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/nautilus-desktop-icon-view-ui.xml:
	* src/file-manager/nautilus-directory-view-ui.xml:
	* src/file-manager/nautilus-icon-view-ui.xml:
	* src/file-manager/nautilus-list-view-ui.xml:
	Initial port of views to GtkUIManager

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-bonobo-extensions.[ch]:
	Remove some unused bonobo extensions.
	
	* libnautilus-private/Makefile.am:
	* src/nautilus-navigation-window.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window.c:
	* libnautilus-private/nautilus-drag-window.[ch]:
	Remove NautilusDragWindow (not used anyway)

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-directory-async.c:
	* libnautilus-private/nautilus-lib-self-check-functions.h:
	* libnautilus-private/nautilus-medusa-support.[ch]:
	* libnautilus-private/nautilus-metafile.c:
	* libnautilus-private/nautilus-search-uri.[ch]:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-search-list-view.[ch]:
	* src/file-manager/nautilus-indexing-info.[ch]:
	* src/file-manager/nautilus-search-list-view-ui.xml:
	* src/nautilus-application.c:
	* src/nautilus-complex-search-bar.[ch]:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window-ui.xml:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-search-bar-criterion-private.h:
	* src/nautilus-search-bar-criterion.[ch]:
	* src/nautilus-search-bar-private.h:
	* src/nautilus-search-bar.[ch]:
	* src/nautilus-shell-ui.xml:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-simple-search-bar.[ch]:
	* src/nautilus-spatial-window.c:
	* src/nautilus-switchable-navigation-bar.[ch]:
	* src/nautilus-switchable-search-bar.[ch]:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-menus.c:
	* src/nautilus-window.c:
	Remove all traces of old medusa support.
	
2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-icon-factory.[ch]:
	(nautilus_get_relative_icon_size_for_zoom_level):
	New function.
	
	* libnautilus-private/nautilus-view.[ch]:
	Redo the zooming interface
	
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Implement the new interface for zooming and clean up.
	Remove the "default zoom affects fonts" behaviour.
	
	* src/nautilus-navigation-window.c: 
	* src/nautilus-zoom-control.[ch]:
	Use the new simplified zoom interfaces

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-async.c:
	(nautilus_async_destroying_file), (extension_info_cancel),
	(info_provider_idle_callback), (info_provider_callback):
	* libnautilus-private/nautilus-directory-private.h:
	Handle the case when the file we're getting extension info
	from goes away.

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* src/nautilus-navigation-window.c:
	(nautilus_navigation_window_set_up_sidebar):
	* src/nautilus-window-manage-views.c:
	(viewed_file_changed_callback):
	Remove some BONOBO TODOs

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove image_properties subdir
	
	* src/Makefile.am:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	* src/nautilus-image-properties-page.[ch]:
	Image property page using new system
	
	* src/nautilus-notes-viewer.c:
	add static

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-sidebar-factory.c:
	* libnautilus-private/nautilus-sidebar-factory.h:
	Remove old sidebar-factory API
	
	* src/file-manager/fm-tree-view.c: 
	* src/nautilus-emblem-sidebar.c:
	* src/nautilus-history-sidebar.c:
	* src/nautilus-information-panel.c:
	* src/nautilus-navigation-window.c:
	Convert to new provider API.

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/Makefile.am:
	* libnautilus-private/nautilus-sidebar-provider.[ch]:
	Add new extensions-style sidebar provider interface
	
	* src/nautilus-navigation-window.c:
	Use it.
	
	* src/nautilus-notes-viewer.[ch]:
	Convert notes viewer to new iface

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	* src/nautilus-notes-sidebar.[ch]:
	* src/nautilus-notes-viewer.[ch]:
	Turn NautilusNotesSidebar into NautilusNotesViewer that is also a
	property page

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove emblem subdir
	
	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-window.c: (nautilus_window_set_hidden_files_mode):
	hidden_files_mode_changed signal

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-tree-view.[ch]:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	Make tree view work with new system.
	
	* src/nautilus-window-manage-views.c: (load_new_location),
	(location_has_really_changed):
	Only emit loading_uri after load_underway has been reported.

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/nautilus-emblem-sidebar.[ch]:
	* src/nautilus-application.c:
	Add emblem sidebar, based on old compontent
	now uses NautilusSignaller to detect/signal emblem changes
	
	* src/nautilus-property-browser.c:
	Catch the emblems_changed signal and refresh

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Fix crash when switching view.

	* src/nautilus-history-sidebar.c:
	Some cleanups

	* src/nautilus-navigation-window.c:
	Fix unref-null warning
	
	* src/Makefile.am:
	* src/nautilus-application.c:
	* src/nautilus-notes-sidebar.[ch]:
	Add notes sidebar widget, based on old component

	* components/Makefile.am (SUBDIRS):
	Remove notes

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove stuff that are now replaced or not needed anymore.
	
	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-window.c:
	Add nautilus_window_info_get_history.
	
	* src/Makefile.am:
	* src/nautilus-history-sidebar.[ch]:
	* src/nautilus-application.c: (nautilus_application_instance_init):
	Add history sidebar widget, based on old component.
	
	* src/nautilus-information-panel.[ch]:
	Some fixes

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* libnautilus-private/nautilus-directory-background.c:
	Fix spew
	
	* libnautilus-private/nautilus-sidebar-factory.h:
	* libnautilus-private/nautilus-window-info.[ch]:
	* src/nautilus-application.c:
	* src/nautilus-information-panel.[ch]:
	* src/nautilus-navigation-window.c:
	* src/nautilus-side-pane.c:
	* src/nautilus-window.c:
	More work on sidebars. Now the information sidebar works.

2004-11-04  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Don't build libnautilus subdir
	
	* libnautilus-private/Makefile.am:
	Don't link to libnautilus
	Add new files (some from libnautilus)
	Remove not used files
	
	* libnautilus-private/apps_nautilus_preferences.schemas.in:
	Remove hide_built_in_bookmarks
	
	* libnautilus-private/nautilus-bonobo-ui.h:
	* libnautilus-private/nautilus-clipboard-ui.xml:
	* libnautilus-private/nautilus-clipboard.[ch]:
	* libnautilus-private/nautilus-idle-queue.[ch]:
	Move here from libnautilus
	
	* libnautilus-private/nautilus-desktop-link.c:
	* libnautilus-private/nautilus-global-preferences.[ch]:
	Remove WEB_NAVIGATION_ENABLED ifdef and HOME_URI/BUILT_IN_BOOKMARKS
	prefs
	
	* libnautilus-private/nautilus-directory-private.h:
	* libnautilus-private/nautilus-metafile-server.idl:
	* libnautilus-private/nautilus-program-choosing.h:
	Remove not needed header inclusions
	
	* libnautilus-private/nautilus-sidebar-factory.[ch]:
	NautilusSidebar registration and creation
	
	* libnautilus-private/nautilus-sidebar.[ch]:
	New NautilusSidebar interface
	
	* libnautilus-private/nautilus-sidebar-functions.[ch]:
	* libnautilus-private/nautilus-undo-context.[ch]:
	* libnautilus-private/nautilus-view-identifier.[ch]:
	* libnautilus-private/nautilus-view-query.[ch]:
	Remove not needed files
	
	* libnautilus-private/nautilus-undo-manager.[ch]:
	* libnautilus-private/nautilus-undo-private.h:
	* libnautilus-private/nautilus-undo-transaction.[ch]:
	* libnautilus-private/nautilus-undo.[ch]:
	Convert from bonobo. Some moved from libnautilus.

	* libnautilus-private/nautilus-view-factory.[ch]:
	NautilusView registration and creation
	
	* libnautilus-private/nautilus-view.[ch]:
	New NautilusView interface
	
	* libnautilus-private/nautilus-window-info.[ch]:
	New NautilusWindowInfo interface
	
	* src/Makefile.am:
	Don't link to libnautilus
	Remove not used files
	
	* src/nautilus-applicable-views.[ch]:
	* src/nautilus-component-adapter-factory.[ch]:
	* src/nautilus-view-frame-corba.[ch]:
	* src/nautilus-view-frame-private.h:
	* src/nautilus-view-frame.[ch]:
	Removed. Not needed anymore.
	
	* src/nautilus-bookmarks-window.c:
	* src/nautilus-complex-search-bar.c:
	* src/nautilus-information-panel.[ch]:
	* src/nautilus-location-bar.c:
	* src/nautilus-location-dialog.c:
	* src/nautilus-location-entry.c:
	* src/nautilus-shell-interface.idl:
	* src/nautilus-side-pane.h:
	* src/nautilus-sidebar-title.c:
	* src/nautilus-simple-search-bar.c:
	Minor changes to build.

	* src/nautilus-shell.c:
	Remove WEB_NAVIGATION_ENABLED
	
	* src/nautilus-application.c:
	* src/nautilus-desktop-window.c:
	* src/nautilus-navigation-window-menus.c:
	* src/nautilus-navigation-window.[ch]:
	* src/nautilus-spatial-window.c:
	* src/nautilus-window-manage-views.[ch]:
	* src/nautilus-window-menus.c:
	* src/nautilus-window-private.h:
	* src/nautilus-window.[ch]:
	Initial conversion to new NautilusView interface.

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-bonobo-provider.[ch]:
	Removed. Not needed anymore.
	Temporary commented out fm-tree-view.[ch]

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-desktop-icon-view.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-icon-view.h:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-list-view.h:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-tree-view.h:
	Initial conversion to new NautilusView interface.
	
2004-11-09  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: install nautilus-file-management-properties.desktop
	in $(datadir)/applications

	* nautilus-file-management-properties.desktop.in:
	add OnlyShowIn=GNOME;

2004-10-29  Iain <iaingnome@gmail.com>

	* libnautilus-private/nautilus-icon-canvas-item.c 
	(compute_text_rectangle): Line up the text with the middle of the icon.

	* libnautilus-private/nautilus-icon-container.c 
	(lay_down_one_line): Take the max height of the row so that icons can
	be lined up.
	(lay_down_icons_horizontal): Calculate the grid_width depending on the
	max width of an icon.
	Line up icons on a vertical line set at the left of the text.

2004-10-29  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Update version to 2.9.1.
	Gnome 2.8 versions are now on the gnome-2-8 branch.

	* ChangeLog: rolled over to ChangeLog-20041029.

==== gnome-2-8 branched from here ===
	
# Local Variables:
# coding: utf-8
# End:
