2000-09-01  Robey Pointer  <robey@eazel.com>

	* components/services/login/nautilus-view/Makefile.am:
	* components/services/login/nautilus-view/nautilus-login-view.c:
	(generate_login_form), (entry_changed_cb), (authn_succeeded),
	(authn_failed), (start_login), (login_button_cb),
	(nautilus_login_view_initialize), (nautilus_login_view_destroy):

	Fix the "login view" so that it's really the change-password
	view.  Another bug (2710) has been filed on cleaning this up and
	possibly renaming it.

2000-09-01  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-private.h:
	* libnautilus-extensions/nautilus-directory-async.c:
	(nautilus_directory_is_anyone_monitoring_file_list):
	Made this function public because it's needed to get the
	assert right.
	(start_or_stop_io): Use it by the new public name.
	* libnautilus-extensions/nautilus-vfs-directory.c:
	(vfs_is_not_empty): Use the new function to get the assert
	right, which fixes bug 2706 (crash at startup with
	bookmark for nonexistent trash file).
	
	* libnautilus-extensions/nautilus-trash-directory.c:
	(remove_trash_volume): Fix a NautilusDirectory leak.

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(print_key_string), (free_hash_tables_at_exit):
	Print keys before complaining about hash table so you
	see them first if you have things set to drop into
	the debugger on warnings.

2000-09-01  John Sullivan  <sullivan@eazel.com>

	Changed all nautilus dialog calls to take a window title
	(or NULL to get "Nautilus: Error" and the like). Updated 
	all callers to pass a window title.

	* libnautilus-extensions/nautilus-stock-dialogs.h,
	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(show_message_box), (show_ok_box), (nautilus_info_dialog),
	(nautilus_warning_dialog), (nautilus_error_dialog),
	(nautilus_error_dialog_with_details), (nautilus_yes_no_dialog):
	Updated all public & private dialog-creating calls to take
	a dialog_title parameter.

	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_install_done):
	* libnautilus-extensions/nautilus-file-operations.c:
	(confirm_empty_trash):
	* libnautilus-extensions/nautilus-program-chooser.c:
	(nautilus_program_chooser_show_no_choices_message):
	* libnautilus-extensions/nautilus-program-choosing.c:
	(nautilus_launch_application_parented):
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions):
	* src/nautilus-application.c:
	(nautilus_application_check_user_directories),
	(nautilus_application_startup):
	* src/nautilus-first-time-druid.c:
	(nautilus_first_time_druid_show):
	* src/nautilus-property-browser.c: (emblem_image_file_changed),
	(add_background_to_browser):
	* src/nautilus-sidebar.c: (receive_dropped_uri_list):
	* src/nautilus-window-manage-views.c: (handle_unreadable_location),
	(report_content_view_failure_to_user),
	(report_sidebar_panel_failure_to_user),
	(nautilus_window_end_location_change_callback):
	* src/nautilus-window-menus.c: (forget_history_if_confirmed),
	(show_bogus_bookmark_window): Made up dialog titles for all
	title-less dialogs. A few were already setting titles after
	the fact, so I removed the now-extraneous set_title calls.

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_summary_service_title_top_widget),
	(create_summary_service_title_bottom_widget),
	(create_services_header_widget),
	(create_summary_service_large_grey_header_widget),
	(create_summary_service_small_grey_header_widget):
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	Finishing Bug #2631.  Arlo titles to all sections of the summary view.

2000-09-01  Michael Engber  <engber@eazel.com>
	
	Removed our quitting logic from nautilus-application
	(where it was tied to nautilus-window closing) and added
	a more general mechanism in main.c - by which you can
	register any gtk object to keep the main event loop
	alive while the object is around. This, in turn, fixed 
	a problem with the first-time-druid not causing nautilus
	to quit when it was cancel via the close box (bug 2211)
	and also a problem with nautilus quitting before you had
	a chance to see an error dialog (bug 1871). Also, added
	nautilus_main_event_loop_quit as the preferred way to
	cause nautilus to quit (as opposed to gtk_main_quit)

	* src/nautilus-application.c: (nautilus_application_startup),
	(nautilus_application_close_desktop),
	(nautilus_application_destroyed_window):
	* src/nautilus-application.h:
	* src/nautilus-first-time-druid.c: (druid_finished),
	(nautilus_first_time_druid_show):
	* src/nautilus-main.c: (nautilus_main_is_event_loop_needed),
	(nautilus_main_event_loop_unregister),
	(nautilus_main_event_loop_register),
	(nautilus_main_is_event_loop_mainstay),
	(nautilus_main_event_loop_quit), (main):
	* src/nautilus-main.h:
	* src/nautilus-shell.c: (corba_quit), (corba_restart):
	* src/nautilus-window-manage-views.c:
	(nautilus_window_end_location_change_callback):
	* src/nautilus-window.c: (nautilus_window_initialize):

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.c: (create_summary_service_title_top_widget),
	(create_summary_service_title_bottom_widget):
	* components/services/nautilus-dependent-shared/shared-service-widg
	ets.h:
	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	First part of the arlo titles for the summary view.

2000-09-01  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-glib-extensions.c:
	(print_key_string), (free_hash_tables_at_exit),
	(nautilus_g_hash_table_new_free_at_exit): Added code to print out
	the keys for the hash table at exit time if it's a hash table with
	string keys. I can tell the keys are strings because the hash
	function is g_str_hash.
	
	* src/file-manager/nautilus-trash-monitor.c:
	(nautilus_trash_monitor_initialize): Used connect_while_alive
	instead of connect to get rid of some nasty problems with
	lingering signal handlers.

2000-09-01  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/libmain.c (tree_shlib_object_destroyed): Don't
	call oaf_plugin_unuse for now, it kills stuff.

	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_destroy,
	nautilus_tree_model_for_each_postorder): Bug fixes to avoid crashing.
	
	* components/tree/nautilus-tree-view.c: (insert_hack_node,
	remove_hack_node, freeze_if_have_hack_node): Assorted fixes to
	avoid crashing or locking up when in-process.

	* configure.in: Fix configure text for in-proc tree view.

2000-09-01  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1476 (Using bogus local bookmark should update
	its icon). The specific bug led me to changing some of
	the internals of NautilusBookmark in a way that has nice
	UI consequences. Now if you use Nautilus to move a bookmarked
	file, the bookmark will continue to find the moved file, and
	if you delete a file, the bookmark's icon will change to the
	"missing location" icon.

	* libnautilus-extensions/nautilus-bookmark.c:
	(nautilus_bookmark_disconnect_file),
	(nautilus_bookmark_connect_file): New helper functions that
	handle wiring or unwiring the connection between a bookmark
	and its NautilusFile.
	(nautilus_bookmark_destroy): Use nautilus_bookmark_disconnect_file.
	(nautilus_bookmark_new_with_icon): Use nautilus_bookmark_connect_file.
	(bookmark_file_changed_callback): Notice changes in the file's URI
	and update the bookmark to use the new URI; notice when the file
	is gone and disconnect/reconnect to file.

	Miscellaneous tweaks:
	
	* src/file-manager/fm-search-list-view.c:
	(compute_reveal_item_name_and_sensitivity): At the suggestion of
	a localizer (menthos), added explanatory comments before the use
	of "Reveal in New Window" and "Reveal in <n> New Windows". It turns
	out that a comment just before a translatable text string will
	appear in the .pot files that localizers use.
	* src/nautilus-first-time-druid.c: (set_up_user_level_page):
	Fixed two misspellings of "technical" and one missing period. Thanks
	to menthos for pointing these out.
	* src/nautilus-window-menus.c: 
	(show_bogus_bookmark_window): Use nautilus_format_uri_for_display
	for bookmark uris shown in user messages. Simplify the message you
	get if you choose a known-bogus URI from the Go menu.

2000-09-01  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2491, remove GtkHtml web browser from build.
	
	* components/Makefile.am:
	Removed the http component
	
2000-09-01  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-elements.c:
        Ooops - Make the QUOTE tag actually print the characters out

2000-09-01  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/nautilus-tree-model.c:
	(nautilus_tree_model_destroy, nautilus_tree_model_unref_callback,
	nautilus_tree_model_for_each_postorder, remove_all_nodes,
	report_node_removed_internal, report_node_removed): Clean up all
	the nodes when destroying the model.
	
	* components/tree/nautilus-tree-view.c: Unref the model when
	destroying the view.

	* components/tree/nautilus-tree-node-private.h,
	components/tree/nautilus-tree-node.c:
	(nautilus_tree_node_remove_from_parent): Renamed from
	`nautilus_tree_remove_from_parent'

2000-09-01  Pavel Cisler  <pavel@eazel.com>

	Fix bugzilla 2186 - Move/Copy/Make-Link for times from multiple directories
	fails. Still needs more testing.
	Reworked file operations to match new gnome_vfs_xfer... APIs that now take
	lists of URIs for copy source and destination.

	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file):
	Update to use new API. 
	
	* libnautilus-extensions/nautilus-file-operations.c:
	(check_target_directory_is_or_in_trash),
	(new_uri_from_escaped_string), (append_basename_unescaped),
	(nautilus_file_operations_copy_move),
	(nautilus_file_operations_new_folder),
	(nautilus_file_operations_move_to_trash),
	(nautilus_file_operations_delete), (do_empty_trash):
	Reworked to use new APIs.
	Eliminated FIXME 1107.
	Updated find_directory calls to use proper "create if needed" flags.
	
	* libnautilus-extensions/nautilus-file-utilities.c:
	(nautilus_get_user_main_directory):
	* libnautilus-extensions/nautilus-file.c: (nautilus_file_rename):
	Updated to use new APIs.

2000-09-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/nautilus-rpm-view-install.c:
	(nautilus_rpm_view_download_progress_signal),
	(nautilus_rpm_view_install_progress_signal),
	(nautilus_rpm_view_download_failed), 
	Emits load_underway signals, although they do not seem to start
	the spinner.
	(get_detailed_errors_foreach),
	(get_detailed_errors), 
	(nautilus_rpm_view_install_failed),
	Generates contents for the dialog box showed when the operation
	failed.
	(nautilus_rpm_view_dependency_check),
	(nautilus_rpm_view_install_done), 
	If failed, show a box to the user
	(nautilus_service_need_password),
	(nautilus_service_try_again), 
	(set_root_client), 
	Added Robeys password dialog stuff
	(delete_files),
	emits a FALSE when asked to delete files.	
	(nautilus_rpm_view_install_package_callback),
	(nautilus_rpm_view_uninstall_package_callback):
	Still defaults to testmachine.eazel.com (bad, but landa.eazel.com
	seems to be down). Sets up the password query thing.
	
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize), 
	(nautilus_rpm_view_destroy),
	(check_installed):
	Fixed the nautilus_label problem by ifdeffing it to use gtk_label
	for the strings that will most likely contain \n\n
	
	* components/rpmview/nautilus-rpm-view.h:
	Added some calls to get div fields from details.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	Fixed the --root handling of dirs.
	
	* components/services/install/lib/eazel-install-protocols.c:
	Now set to use the old CGI stuff while landa doesn't serve me my
	rpm's..
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_prune_packages_helper),
	Added some debug output
	(eazel_install_package_name_compare):
	Removed some debug output
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_destroy_foreach), (packagedata_destroy),
	free the pack structure itself
	(packagedata_remove_soft_dep):
	paranoia check
	
	* components/services/trilobite/libtrilobite/trilobite-root-client-
	public.h:
	Changed the include to use "'s instead of <'s. 
	
	* nautilus-installer/src/Makefile:
	* nautilus-installer/src/installer.c: (create_pixmap),
	(create_what_to_do_page), (create_install_page),
	(create_finish_page_good), (create_finish_page_evil),
	(create_window), (create_info_druid_page):
	Better image loading for the static installer.

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/nautilus-dependent-shared/icons/Makefile.am:
	Forgot to update the Makefile.am for the new icons.

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/nautilus-view/nautilus-summary-view.c
	: (generate_summary_form):

	Minor ui fixes to prepare adding the arlo title widgets.  Adding
	several images as well.

2000-09-01  Andy Hertzfeld  <andy@eazel.com>

	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_initialize), (check_installed),
	(nautilus_rpm_view_update_from_uri):
	removed anti-aliased text from rpm_view, since it was causing
	too many problems; displayed icon contained in package header, or
	a generic package icon if there isn't one; gather and display
	package install time correctly.
	
2000-08-31  Maciej Stachowiak  <mjs@eazel.com>

	* ChangeLog: rolled over to ChangeLog-20000831.

