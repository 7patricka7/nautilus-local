2000-06-26  Darin Adler  <darin@eazel.com>

	* components/hardware/nautilus-hardware-view.c:
	(nautilus_hardware_view_destroy):
	* components/loser/content/nautilus-content-loser.c:
	(nautilus_content_loser_destroy):
	* components/loser/sidebar/nautilus-sidebar-loser.c:
	(nautilus_sidebar_loser_destroy):
	* components/mozilla/nautilus-mozilla-content-view.c:
	(nautilus_mozilla_content_view_destroy):
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_destroy):
	* components/rpmview/nautilus-rpm-view.c:
	(nautilus_rpm_view_destroy):
	* components/sample/nautilus-sample-content-view.c:
	(nautilus_sample_content_view_destroy):
	* components/services/time/nautilus-view/trilobite-eazel-time-view.c:
	(trilobite_eazel_time_view_destroy):
	* components/tree/nautilus-tree-view.c:
	(nautilus_tree_view_destroy):
	Removed a bunch of incorrect calls to bonobo_object_unref.
	An error in the sample can be an insidious thing.
	
	* components/tree/main.c: (tree_object_destroyed),
	(tree_make_object), (main): Removed some stray debugging stuff.
	
	* libnautilus-extensions/Makefile.am: Got rid of the grid
	* libnautilus-extensions/nautilus-icon-private.h: Got rid of the
	grid.
	* libnautilus-extensions/nautilus-icon-container.c:
	(keyboard_icon_reveal_timeout_callback): Took out unneeded use of
	thread locking macros. Maybe someday I'll regret this, but we can
	add them back then.
	(get_all_icon_bounds): Added shared function.
	(update_scroll_region): Renamed set_scroll_region and made it use
	the shared function. Also got rid of grid code.
	(resort): Got rid of grid code.
	(lay_down_icons): Got rid of grid code.
	(relayout): Made it lay down new icons before doing any layout
	work. Also made sure it doesn't do the resort while stretching.
	(reload_icon_positions): Got rid of grid code.
	(rubberband_select): Got rid of grid code. This was the one place
	that it might have made things a little faster but probably not
	due to the complexity of what it was doing.
	(rubberband_timeout_callback): Took out unneeded use of thread
	locking macros. Maybe someday I'll regret this, but we can add
	them back then.
	(destroy): Got rid of grid code.
	(world_width_changed): Got rid of grid code.
	(nautilus_icon_container_initialize): Got rid of grid code and
	an extra idle cycle that wasn't needed.
	(nautilus_icon_container_clear): Got rid of grid code and added
	code to update the scroll region on clear.
	(icon_destroy): Got rid of grid code.
	(assign_icon_position), (finish_adding_icon),
	(finish_adding_new_icons), (finish_adding_new_icons_callback),
	(nautilus_icon_container_add): Replaced old idle code with
	something specific to adding new icons. This does the proper
	layout for manual as well as automatic layout cases.
	
	* libnautilus-extensions/nautilus-background.h:
	* libnautilus-extensions/nautilus-background.c:
	(nautilus_background_initialize_class): Made two signals instead
	of one. One for when the background's settings change and another
	for when the appearance changes.
	(nautilus_background_set_color): Emit both signals.
	(load_image_callback): Emit only the appearance change signal.
	(nautilus_background_set_tile_image_uri): Emit both signals.
	(nautilus_get_widget_background): Connect to the
	appearance_changed signal.
	* libnautilus-extensions/nautilus-directory-background.c:
	(nautilus_connect_background_to_directory_metadata):
	Connect to the settings_changed signal.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_real_merge_menus): Connect to the
	settings_changed signal.
	* src/nautilus-sidebar.c: (nautilus_sidebar_update_info): Connect
	to the appearance_changed signal.
	* components/music/nautilus-music-view.c:
	(nautilus_music_view_set_up_background): Connect to the
	settings_changed signal.
	
	* HACKING: Gratuitious reformatting.
	* RENAMING: Added notes about how we do renaming, at the request
	of one of the hackers.
	
	* nautilus-clean.sh: Added nautilus-tree-view to the things that
	are killed, and made gratuitous changes to the script.

Mon Jun 26 15:50:57 2000  George Lebl <jirka@5z.com>

	* components/hardware/Makefile.am, components/help/Makefile.am,
	  components/history/Makefile.am, components/html/Makefile.am,
	  components/music/Makefile.am, components/notes/Makefile.am,
	  components/rpmview/Makefile.am, src/file-manager/Makefile.am: 
	Add $(VFS_CFLAGS) to the includes as it is necessary for
	gnome-vfs

2000-06-26  Andy Hertzfeld  <andy@eazel.com>

	* icons/eazel/Makefile.am:
	* icons/eazel/i-regular-12.png
	* icons/eazel/i-regular-24.png
	* icons/eazel/i-regular-36.png
	* icons/eazel/i-regular.png
	* icons/eazel/i-regular-72.png
	* icons/eazel/i-regular-96.png
	* icons/vector/i-directory-accept.svg:
	* icons/vector/i-directory.svg:
	newer icons from Susan
	
2000-06-26  Andy Hertzfeld  <andy@eazel.com>

	* components/music/Makefile.am:
	* components/music/mp3head.c,h: (extractI4), (is_mphead), (is_xhead),
	(get_bitrate), (get_samprate), (get_mpgver):
	* components/music/mp3head.h:
	integrated Erik Gustavsson's patch to support variable bit rate
	file properly in the music view.
	* components/music/nautilus-music-view.c: (is_mp3_file),
	(strip_trailing_blanks), (read_id_tag), (extract_number),
	(fetch_song_info):
	fixed bug 1281, music view should use mime types instead of
	extensions, by using the mime type in is_mp3_file.  Also, cleaned
	up Erik's patch for removing trailing blanks and integrated it.
	
2000-06-26  Kjartan Maraas  <kmaraas@gnome.org>

	* HACKING: Move bonobo after gnome-vfs since it now
	depends on it for bonobo-storage-vfs.c to build.
	
2000-06-26  Darin Adler  <darin@eazel.com>

	* libnautilus-extensions/nautilus-directory-metafile.c:
	(set_metadata_eat_value): Fixed use of hash table in here. The
	old code would destroy the wrong key. (Thanks to Ian for pointing
	that when you insert a value into GHashTable it keeps the old key
	instead of overwriting with the new one.)
	
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_signal_connect_free_data):
	* src/file-manager/fm-properties-window.c: (attach_value_field),
	(create_emblems_page), (add_permissions_row_label):
	* src/nautilus-link-set-window.c: (make_link_set_check_box):
	* src/nautilus-property-browser.c:
	(make_properties_from_directory_path),
	(make_properties_from_xml_node), (make_category_link):
	* src/nautilus-sidebar.c: (nautilus_sidebar_add_panel_items):
	Got rid of unnecessary casts to (GtkDestroyNotify).

2000-06-26  Darin Adler  <darin@eazel.com>

	* components/services/install/command-line/.cvsignore:
	* components/services/install/lib/.cvsignore:
	Ignore some additional generated files.
	
	* libnautilus-extensions/nautilus-gnome-extensions.h:
	* libnautilus-extensions/nautilus-gnome-extensions.c:
	Moved stock dialog functions to nautilus-stock-dialogs.[ch].
	(nautilus_gnome_canvas_item_request_update_deep),
	(nautilus_gnome_canvas_request_update_all),
	(nautilus_gnome_canvas_set_scroll_region),
	(nautilus_gnome_canvas_set_scroll_region_left_justify):
	Added a bunch of functions that were previously private inside
	NautilusIconContainer.
	
	* libnautilus-extensions/nautilus-gtk-extensions.h:
	* libnautilus-extensions/nautilus-gtk-extensions.c:
	(nautilus_gtk_adjustment_set_value),
	(nautilus_gtk_adjustment_clamp_value):
	Added functions that treat the value range in a GtkAdjustment the
	same way scroll bars do, taking the page size into account.
	
	* libnautilus-extensions/nautilus-horizontal-splitter.h:
	* libnautilus-extensions/nautilus-horizontal-splitter.c:
	(nautilus_horizontal_splitter_initialize),
	(toggle_splitter_position),
	(nautilus_horizontal_splitter_button_press),
	(nautilus_horizontal_splitter_button_release):
	Fixed logic so that splitter will only open or close if you both
	click and release within the splitter itself.
	
	* libnautilus-extensions/nautilus-icon-private.h:
	* libnautilus-extensions/nautilus-icon-container.c:
	(icon_toggle_selected): Move icons to front when they are selected.
	(set_scroll_region): Moved workaround that sets scroll region to
	be large enough to fill the widget allocation into a function in
	nautilus-gnome-extensions.h. In the process, I fixed the problem
	where it would do the job wrong when the view was zoomed.
	(lay_down_icons), (relayout), (reload_icon_positions):
	Started work on sharing code between automatic layout of the entire
	container and layout of new icons as the arrive.
	(nautilus_icon_container_clear), (nautilus_icon_container_add):
	Got started on the mechanism for laying out new icons as they arrive
	in bunches instead of one at a time.
	
	* libnautilus-extensions/nautilus-icon-dnd.c:
	* libnautilus-extensions/nautilus-program-chooser.c:
	* libnautilus-extensions/nautilus-program-choosing.c:
	* src/file-manager/dfos-xfer.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-error-reporting.c:
	* src/nautilus-application.c:
	* src/nautilus-location-bar.c:
	* src/nautilus-property-browser.c:
	* src/nautilus-window-manage-views.c:
	* src/nautilus-window-menus.c:
	Added includes to source files that use the stock dialogs.
	
	* libnautilus-extensions/nautilus-stock-dialogs.h:
	* libnautilus-extensions/nautilus-stock-dialogs.c:
	(nautilus_timed_wait_stop), (convert_varargs_to_name_array),
	(nautilus_simple_dialog), (turn_on_line_wrap_flag),
	(turn_on_line_wrap_flag_callback), (show_ok_box),
	(show_yes_no_box), (nautilus_info_dialog),
	(nautilus_info_dialog_parented), (nautilus_warning_dialog),
	(nautilus_warning_dialog_parented), (nautilus_error_dialog),
	(nautilus_error_dialog_parented), (nautilus_yes_no_dialog),
	(nautilus_yes_no_dialog_parented):
	Moved all the stock dialog code in here.
	
	* src/nautilus-sidebar-title.c: (update_icon): Only display the
	icon when it's ready, instead of showing generic document icon
	before that time.
	(update_title), (update_more_info), (update_emblems),
	(update_notes): Added FIXMEs about doing the same with other info.
	(nautilus_sidebar_title_button_press_event): Added a FIXME to the
	half-baked code in here.

2000-06-26  Fatih Demir	<kabalak@gmx.net>

	* Makefile.am: Added the previous ChangeLogs to
	the EXTRA_DIST target.
	
	* configure.in: Cosmetics and a configuration summary at the end
	of the ./configure process.
	
	* helper-utilities/authenticate/nautilus-authenticate.h:
	Include <stdlib.h> for compiling with -Werror without error.
	
2000-06-26  Pavel Cisler <pavel@eazel.com>

	* acconfig.h:
	* configure.in:
	Fix build breakage caused recent changes to make GnomeVFS compile
	without OAF support. Some GnomeVFS headers now require USING_OAF
	to be defined and when included from Nautilus, this define was
	missing. Not sure this is the 100% correct way to do this but
	this should at least prevent people from being stuck with a broken
	build.

2000-06-26  Andy Hertzfeld  <andy@eazel.com>

	Added XML-based theme mechanism and used it for the sidebar
	background, which isn't entirely working yet.
	
	* icons/Makefile.am:
	* icons/default.xml:
	* icons/eazel/Makefile.am:
	* icons/eazel/eazel.xml:
	* icons/vector/Makefile.am:
	* icons/vector/vector.xml:
	New XML-based theme files.
	* libnautilus-extensions/nautilus-global-preferences.c,h:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	Changed "icon_theme" preference to general "theme".
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_get_current_icon_factory),
	(nautilus_icon_factory_destroy), (icon_theme_changed_callback):
	Changed from "icon_theme" to "theme".
	* libnautilus-extensions/nautilus-preferences-item.c,h:
	(preferences_item_construct), (preferences_item_create_theme):
	Changed from "icon_theme" to "theme".
	* libnautilus-extensions/nautilus-xml-extensions.c,h:
	(nautilus_xml_get_child_by_name):
	Added a routine to access child nodes.
	* src/nautilus-sidebar.c: (nautilus_sidebar_initialize),
	(nautilus_sidebar_destroy), (nautilus_sidebar_read_theme),
	(nautilus_sidebar_theme_changed),
	(nautilus_sidebar_background_changed),
	(nautilus_sidebar_update_info):
	Made the sidebar get its default values from an XML-based theme
	file, and reload them when the theme changes.

2000-06-25  Andy Hertzfeld  <andy@eazel.com>

	* libnautilus-extensions/nautilus-link.c:
	(free_icon_notification_info), (icon_read_done_callback),
	(is_remote_uri), (nautilus_link_get_image_uri):
	Linksets now use gnome-vfs to load load icons over http instead of
	ghttp, using Darin's new utility routines.  Also, made it load
	them asynchronously.
	
	* libnautilus-extensions/nautilus-icon-factory.c:
	(nautilus_icon_factory_get_pixbuf_for_icon):
	Made get_pixbuf_for_icon set the custom boolean when it calls
	get_icon_from_cache if necessary.
	
2000-06-25  Fatih Demir	<kabalak@gmx.net>
	
	* ChangeLog: This is the fresh one.
	* ChangeLog-20000625: Split up the ChangeLog.
