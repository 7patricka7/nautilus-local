{
  "app-id": "org.gnome.Nautilus",
  "runtime": "org.gnome.Platform",
  "runtime-version": "45",
  "sdk": "org.gnome.Sdk",
  "command": "nautilus",
  "finish-args": [
    "--device=dri",
    "--share=ipc",
    "--socket=x11",
    "--socket=wayland",
    "--talk-name=org.gnome.OnlineAccounts",
    "--filesystem=host",
    "--filesystem=/tmp",
    "--talk-name=org.gtk.vfs.*",
    "--talk-name=org.gtk.MountOperationHandler",
    "--filesystem=xdg-run/gvfsd",
    "--filesystem=xdg-run/dconf",
    "--filesystem=~/.config/dconf:ro",
    "--talk-name=ca.desrt.dconf",
    "--talk-name=org.gnome.NautilusPreviewer",
    "--talk-name=org.gnome.NautilusPreviewerDevel",
    "--talk-name=org.gnome.DiskUtility",
    "--talk-name=org.gnome.Settings",
    "--talk-name=org.gnome.Console",
    "--talk-name=org.gnome.Mutter.ServiceChannel",
    "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
    "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:Audio",
    "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:Documents",
    "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:FileSystem",
    "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:Pictures",
    "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:Music",
    "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:Video"
  ],
  "modules": [
    {
      "name": "exiv2",
      "config-opts": [
        "-DCMAKE_INSTALL_PREFIX=/app",
        "-DCMAKE_INSTALL_LIBDIR=/app/lib"
      ],
      "buildsystem": "cmake-ninja",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/Exiv2/exiv2.git",
          "branch": "0.27-maintenance"
        }
      ]
    },
    {
      "name": "gexiv2",
      "buildsystem": "meson",
      "builddir": true,
      "config-opts": [
        "--libdir=/app/lib",
        "-Dintrospection=false",
        "-Dvapi=false",
        "-Dpython3=false"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/gexiv2.git",
          "tag": "gexiv2-0.14.2"
        }
      ]
    },
    {
      "name": "localsearch",
      "buildsystem": "meson",
      "cleanup": [
        "/etc",
        "/libexec/localsearch-3",
        "/share/dbus-1/services/org.freedesktop.Tracker3.Miner.Extract.service",
        "/share/dbus-1/services/org.freedesktop.Tracker3.Miner.Files.service",
        "/share/dbus-1/services/org.freedesktop.Tracker3.Miner.Files.Control.service"
      ],
      "config-opts": [
        "-Dextract=true",
        "-Dgeneric_media_extractor=none",
        "-Dlandlock=disabled",
        "-Dman=false",
        "-Dminer_fs=true",
        "-Dminer_rss=false",
        "-Dsystemd_user_services=false",
        "-Dwriteback=false",
        "-Dbattery_detection=none"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/localsearch.git",
          "branch": "main"
        }
      ]
    },
    {
      "name": "gnome-desktop",
      "buildsystem": "meson",
      "config-opts": [
        "-Ddebug_tools=false",
        "-Ddesktop_docs=false",
        "-Dudev=disabled"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/gnome-desktop.git"
        }
      ]
    },
    {
      "name": "totem-pl-parser",
      "buildsystem": "meson",
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/totem-pl-parser.git"
        }
      ]
    },
    {
      "name": "totem-video-thumbnailer",
      "buildsystem": "meson",
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/totem-video-thumbnailer.git"
        }
      ]
    },
    {
      "name": "popplerdata",
      "no-autogen": true,
      "make-install-args": [
        "prefix=/app"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://poppler.freedesktop.org/poppler-data-0.4.12.tar.gz",
          "sha256": "c835b640a40ce357e1b83666aabd95edffa24ddddd49b8daff63adb851cdab74",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 3687,
            "url-template": "https://poppler.freedesktop.org/poppler-data-$version.tar.gz"
          }
        }
      ]
    },
    {
      "name": "poppler",
      "buildsystem": "cmake-ninja",
      "config-opts": [
        "-DCMAKE_INSTALL_LIBDIR=/app/lib",
        "-DCMAKE_INSTALL_INCLUDEDIR=/app/include",
        "-DBUILD_GTK_TESTS=OFF",
        "-DBUILD_CPP_TESTS=OFF",
        "-DENABLE_CPP=OFF",
        "-DENABLE_BOOST=OFF",
        "-DENABLE_GOBJECT_INTROSPECTION=OFF",
        "-DENABLE_LIBOPENJPEG=openjpeg2",
        "-DENABLE_QT5=OFF",
        "-DENABLE_QT6=OFF"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://poppler.freedesktop.org/poppler-23.08.0.tar.xz",
          "sha256": "4a4bf7fc903b9f1a2ab7d04b7c5d8220db9bc6261cc73fdb9a826dc272f49aa8",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 3686,
            "url-template": "https://poppler.freedesktop.org/poppler-$version.tar.xz"
          }
        }
      ]
    },
    {
      "name": "evince",
      "buildsystem": "meson",
      "cleanup": [
        "/share/evince"
      ],
      "config-opts": [
        "-Dviewer=false",
        "-Dgtk_doc=false",
        "-Duser_doc=false",
        "-Dgtk_unix_print=disabled",
        "-Dintrospection=false",
        "-Dkeyring=disabled",
        "-Dthumbnailer=true",
        "-Dpreviewer=false",
        "-Dsystemduserunitdir=no",
        "-Dnautilus=false",
        "--buildtype=release"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/evince.git",
          "branch": "main"
        }
      ]
    },
    {
      "name": "gnome-epub-thumbnailer",
      "buildsystem": "meson",
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/gnome-epub-thumbnailer.git"
        }
      ]
    },
    {
      "name": "gnome-common",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/gnome-common.git"
        }
      ]
    },
    {
      "name": "gnome-kra-ora-thumbnailer",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/gnome-kra-ora-thumbnailer.git"
        }
      ]
    },
    {
      "name": "gnome-font-viewer",
      "buildsystem": "meson",
      "cleanup": [
        "/bin/gnome-thumbnail-font",
        "/include",
        "/lib/pkgconfig", "/share/pkgconfig",
        "/share/aclocal",
        "/man", "/share/man", "/share/gtk-doc",
        "*.la", ".a",
        "/lib/girepository-1.0",
        "/share/gir-1.0",
        "/share/doc"
      ],
      "sources": [
        {
          "type": "git",
          "branch": "main",
          "url": "https://gitlab.gnome.org/GNOME/gnome-font-viewer.git"
        }
      ]
    },
    {
      "name": "gnome-autoar",
      "buildsystem": "meson",
      "builddir": true,
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/gnome-autoar.git"
        }
      ]
    },
    {
      "name": "libportal",
      "buildsystem": "meson",
      "builddir": true,
      "config-opts": [
        "-Ddocs=false",
        "-Dbackend-gtk4=enabled",
        "-Dbackend-gtk3=disabled",
        "-Dbackend-qt5=disabled",
        "-Dvapi=false",
        "--libdir=/app/lib",
        "--buildtype=debugoptimized"
      ],
      "sources" : [
        {
          "type": "git",
          "url": "https://github.com/flatpak/libportal.git",
          "branch": "main"
        }
      ]
    },
    {
      "name": "libcloudproviders",
      "buildsystem": "meson",
      "builddir": true,
      "config-opts": [
      	"-Dvapigen=false"
      ],
      "sources" : [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/World/libcloudproviders.git"
        }
      ]
    },
    {
      "buildsystem": "meson",
      "run-tests": true,
      "builddir": true,
      "name": "nautilus",
      "build-options": {
        "test-args": [
          "--device=dri",
          "--share=ipc",
          "--socket=fallback-x11",
          "--socket=wayland",
          "--talk-name=org.gtk.vfs.*",
          "--talk-name=org.gtk.MountOperationHandler",
          "--filesystem=xdg-run/gvfsd",
          "--add-policy=Tracker3.dbus:org.freedesktop.Tracker3.Miner.Files=tracker:FileSystem"
        ]
      },
      "config-opts": [
        "--libdir=/app/lib"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/nautilus.git",
          "branch": "gnome-45"
        }
      ]
    }
  ]
}
